!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,e,n){Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=29)}([function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(i){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";e.a={methods:{getIconsBaseUrl:function(){return this.baseUrl+"/img/map/icons/"},getIconUrl:function(t){return this.getIconsBaseUrl()+("active"!==t?t:"default")+".svg"}}}},function(t,e){"use strict";function n(t){return"object"==typeof t&&null!==t}function i(t){switch({}.toString.call(t)){case"[object Error]":return!0;case"[object Exception]":return!0;case"[object DOMException]":return!0;default:return t instanceof Error}}function r(t){function e(e,n){var i=t(e)||e;return n?n(i)||i:i}return e}t.exports={isObject:n,isError:i,wrappedCallback:r}},function(t,e,n){var i;!function(r,s,a,o){"use strict";function c(t,e,n){return setTimeout(p(t,n),e)}function l(t,e,n){return!!Array.isArray(t)&&(u(t,n[e],n),!0)}function u(t,e,n){var i;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==o)for(i=0;i<t.length;)e.call(n,t[i],i,t),i++;else for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function h(t,e,n){var i="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",s=r.console&&(r.console.warn||r.console.log);return s&&s.call(r.console,i,n),t.apply(this,arguments)}}function d(t,e,n){var i,r=e.prototype;i=t.prototype=Object.create(r),i.constructor=t,i._super=r,n&&mt(i,n)}function p(t,e){return function(){return t.apply(e,arguments)}}function f(t,e){return typeof t==_t?t.apply(e?e[0]||o:o,e):t}function m(t,e){return t===o?e:t}function v(t,e,n){u(b(e),function(e){t.addEventListener(e,n,!1)})}function g(t,e,n){u(b(e),function(e){t.removeEventListener(e,n,!1)})}function _(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function y(t,e){return t.indexOf(e)>-1}function b(t){return t.trim().split(/\s+/g)}function w(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function C(t){return Array.prototype.slice.call(t,0)}function k(t,e,n){for(var i=[],r=[],s=0;s<t.length;){var a=e?t[s][e]:t[s];w(r,a)<0&&i.push(t[s]),r[s]=a,s++}return n&&(i=e?i.sort(function(t,n){return t[e]>n[e]}):i.sort()),i}function x(t,e){for(var n,i,r=e[0].toUpperCase()+e.slice(1),s=0;s<vt.length;){if(n=vt[s],i=n?n+r:e,i in t)return i;s++}return o}function E(){return xt++}function T(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||r}function O(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){f(t.options.enable,[t])&&n.handler(e)},this.init()}function I(t){var e,n=t.options.inputClass;return new(e=n?n:Ot?z:It?W:Tt?X:L)(t,S)}function S(t,e,n){var i=n.pointers.length,r=n.changedPointers.length,s=e&Mt&&i-r===0,a=e&(qt|Ut)&&i-r===0;n.isFirst=!!s,n.isFinal=!!a,s&&(t.session={}),n.eventType=e,A(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function A(t,e){var n=t.session,i=e.pointers,r=i.length;n.firstInput||(n.firstInput=$(e)),r>1&&!n.firstMultiple?n.firstMultiple=$(e):1===r&&(n.firstMultiple=!1);var s=n.firstInput,a=n.firstMultiple,o=a?a.center:s.center,c=e.center=M(i);e.timeStamp=wt(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=F(o,c),e.distance=U(o,c),P(n,e),e.offsetDirection=q(e.deltaX,e.deltaY);var l=R(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=l.x,e.overallVelocityY=l.y,e.overallVelocity=bt(l.x)>bt(l.y)?l.x:l.y,e.scale=a?j(a.pointers,i):1,e.rotation=a?N(a.pointers,i):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,D(n,e);var u=t.element;_(e.srcEvent.target,u)&&(u=e.srcEvent.target),e.target=u}function P(t,e){var n=e.center,i=t.offsetDelta||{},r=t.prevDelta||{},s=t.prevInput||{};e.eventType!==Mt&&s.eventType!==qt||(r=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=r.x+(n.x-i.x),e.deltaY=r.y+(n.y-i.y)}function D(t,e){var n,i,r,s,a=t.lastInterval||e,c=e.timeStamp-a.timeStamp;if(e.eventType!=Ut&&(c>$t||a.velocity===o)){var l=e.deltaX-a.deltaX,u=e.deltaY-a.deltaY,h=R(c,l,u);i=h.x,r=h.y,n=bt(h.x)>bt(h.y)?h.x:h.y,s=q(l,u),t.lastInterval=e}else n=a.velocity,i=a.velocityX,r=a.velocityY,s=a.direction;e.velocity=n,e.velocityX=i,e.velocityY=r,e.direction=s}function $(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:yt(t.pointers[n].clientX),clientY:yt(t.pointers[n].clientY)},n++;return{timeStamp:wt(),pointers:e,center:M(e),deltaX:t.deltaX,deltaY:t.deltaY}}function M(t){var e=t.length;if(1===e)return{x:yt(t[0].clientX),y:yt(t[0].clientY)};for(var n=0,i=0,r=0;r<e;)n+=t[r].clientX,i+=t[r].clientY,r++;return{x:yt(n/e),y:yt(i/e)}}function R(t,e,n){return{x:e/t||0,y:n/t||0}}function q(t,e){return t===e?Ft:bt(t)>=bt(e)?t<0?Nt:jt:e<0?Lt:zt}function U(t,e,n){n||(n=Vt);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return Math.sqrt(i*i+r*r)}function F(t,e,n){n||(n=Vt);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return 180*Math.atan2(r,i)/Math.PI}function N(t,e){return F(e[1],e[0],Xt)+F(t[1],t[0],Xt)}function j(t,e){return U(e[0],e[1],Xt)/U(t[0],t[1],Xt)}function L(){this.evEl=Yt,this.evWin=Zt,this.pressed=!1,O.apply(this,arguments)}function z(){this.evEl=Qt,this.evWin=te,O.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function H(){this.evTarget=ne,this.evWin=ie,this.started=!1,O.apply(this,arguments)}function B(t,e){var n=C(t.touches),i=C(t.changedTouches);return e&(qt|Ut)&&(n=k(n.concat(i),"identifier",!0)),[n,i]}function W(){this.evTarget=se,this.targetIds={},O.apply(this,arguments)}function V(t,e){var n=C(t.touches),i=this.targetIds;if(e&(Mt|Rt)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,s,a=C(t.changedTouches),o=[],c=this.target;if(s=n.filter(function(t){return _(t.target,c)}),e===Mt)for(r=0;r<s.length;)i[s[r].identifier]=!0,r++;for(r=0;r<a.length;)i[a[r].identifier]&&o.push(a[r]),e&(qt|Ut)&&delete i[a[r].identifier],r++;return o.length?[k(s.concat(o),"identifier",!0),o]:void 0}function X(){O.apply(this,arguments);var t=p(this.handler,this);this.touch=new W(this.manager,t),this.mouse=new L(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function G(t,e){t&Mt?(this.primaryTouch=e.changedPointers[0].identifier,Y.call(this,e)):t&(qt|Ut)&&Y.call(this,e)}function Y(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var i=this.lastTouches,r=function(){var t=i.indexOf(n);t>-1&&i.splice(t,1)};setTimeout(r,ae)}}function Z(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],s=Math.abs(e-r.x),a=Math.abs(n-r.y);if(s<=oe&&a<=oe)return!0}return!1}function K(t,e){this.manager=t,this.set(e)}function J(t){if(y(t,pe))return pe;var e=y(t,fe),n=y(t,me);return e&&n?pe:e||n?e?fe:me:y(t,de)?de:he}function Q(){if(!le)return!1;var t={},e=r.CSS&&r.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=!e||r.CSS.supports("touch-action",n)}),t}function tt(t){this.options=mt({},this.defaults,t||{}),this.id=E(),this.manager=null,this.options.enable=m(this.options.enable,!0),this.state=ge,this.simultaneous={},this.requireFail=[]}function et(t){return t&Ce?"cancel":t&be?"end":t&ye?"move":t&_e?"start":""}function nt(t){return t==zt?"down":t==Lt?"up":t==Nt?"left":t==jt?"right":""}function it(t,e){var n=e.manager;return n?n.get(t):t}function rt(){tt.apply(this,arguments)}function st(){rt.apply(this,arguments),this.pX=null,this.pY=null}function at(){rt.apply(this,arguments)}function ot(){tt.apply(this,arguments),this._timer=null,this._input=null}function ct(){rt.apply(this,arguments)}function lt(){rt.apply(this,arguments)}function ut(){tt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ht(t,e){return e=e||{},e.recognizers=m(e.recognizers,ht.defaults.preset),new dt(t,e)}function dt(t,e){this.options=mt({},ht.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=I(this),this.touchAction=new K(this,this.options.touchAction),pt(this,!0),u(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function pt(t,e){var n=t.element;if(n.style){var i;u(t.options.cssProps,function(r,s){i=x(n.style,s),e?(t.oldCssProps[i]=n.style[i],n.style[i]=r):n.style[i]=t.oldCssProps[i]||""}),e||(t.oldCssProps={})}}function ft(t,e){var n=s.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}var mt,vt=["","webkit","Moz","MS","ms","o"],gt=s.createElement("div"),_t="function",yt=Math.round,bt=Math.abs,wt=Date.now;mt="function"!=typeof Object.assign?function(t){if(t===o||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==o&&null!==i)for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}return e}:Object.assign;var Ct=h(function(t,e,n){for(var i=Object.keys(e),r=0;r<i.length;)(!n||n&&t[i[r]]===o)&&(t[i[r]]=e[i[r]]),r++;return t},"extend","Use `assign`."),kt=h(function(t,e){return Ct(t,e,!0)},"merge","Use `assign`."),xt=1,Et=/mobile|tablet|ip(ad|hone|od)|android/i,Tt="ontouchstart"in r,Ot=x(r,"PointerEvent")!==o,It=Tt&&Et.test(navigator.userAgent),St="touch",At="pen",Pt="mouse",Dt="kinect",$t=25,Mt=1,Rt=2,qt=4,Ut=8,Ft=1,Nt=2,jt=4,Lt=8,zt=16,Ht=Nt|jt,Bt=Lt|zt,Wt=Ht|Bt,Vt=["x","y"],Xt=["clientX","clientY"];O.prototype={handler:function(){},init:function(){this.evEl&&v(this.element,this.evEl,this.domHandler),this.evTarget&&v(this.target,this.evTarget,this.domHandler),this.evWin&&v(T(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&g(this.element,this.evEl,this.domHandler),this.evTarget&&g(this.target,this.evTarget,this.domHandler),this.evWin&&g(T(this.element),this.evWin,this.domHandler)}};var Gt={mousedown:Mt,mousemove:Rt,mouseup:qt},Yt="mousedown",Zt="mousemove mouseup";d(L,O,{handler:function(t){var e=Gt[t.type];e&Mt&&0===t.button&&(this.pressed=!0),e&Rt&&1!==t.which&&(e=qt),this.pressed&&(e&qt&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:Pt,srcEvent:t}))}});var Kt={pointerdown:Mt,pointermove:Rt,pointerup:qt,pointercancel:Ut,pointerout:Ut},Jt={2:St,3:At,4:Pt,5:Dt},Qt="pointerdown",te="pointermove pointerup pointercancel";r.MSPointerEvent&&!r.PointerEvent&&(Qt="MSPointerDown",te="MSPointerMove MSPointerUp MSPointerCancel"),d(z,O,{handler:function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),r=Kt[i],s=Jt[t.pointerType]||t.pointerType,a=s==St,o=w(e,t.pointerId,"pointerId");r&Mt&&(0===t.button||a)?o<0&&(e.push(t),o=e.length-1):r&(qt|Ut)&&(n=!0),o<0||(e[o]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:s,srcEvent:t}),n&&e.splice(o,1))}});var ee={touchstart:Mt,touchmove:Rt,touchend:qt,touchcancel:Ut},ne="touchstart",ie="touchstart touchmove touchend touchcancel";d(H,O,{handler:function(t){var e=ee[t.type];if(e===Mt&&(this.started=!0),this.started){var n=B.call(this,t,e);e&(qt|Ut)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:St,srcEvent:t})}}});var re={touchstart:Mt,touchmove:Rt,touchend:qt,touchcancel:Ut},se="touchstart touchmove touchend touchcancel";d(W,O,{handler:function(t){var e=re[t.type],n=V.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:St,srcEvent:t})}});var ae=2500,oe=25;d(X,O,{handler:function(t,e,n){var i=n.pointerType==St,r=n.pointerType==Pt;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)G.call(this,e,n);else if(r&&Z.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ce=x(gt.style,"touchAction"),le=ce!==o,ue="compute",he="auto",de="manipulation",pe="none",fe="pan-x",me="pan-y",ve=Q();K.prototype={set:function(t){t==ue&&(t=this.compute()),le&&this.manager.element.style&&ve[t]&&(this.manager.element.style[ce]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return u(this.manager.recognizers,function(e){f(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),J(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var i=this.actions,r=y(i,pe)&&!ve[pe],s=y(i,me)&&!ve[me],a=y(i,fe)&&!ve[fe];if(r){var o=1===t.pointers.length,c=t.distance<2,l=t.deltaTime<250;if(o&&c&&l)return}return a&&s?void 0:r||s&&n&Ht||a&&n&Bt?this.preventSrc(e):void 0},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var ge=1,_e=2,ye=4,be=8,we=be,Ce=16,ke=32;tt.prototype={defaults:{},set:function(t){return mt(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(l(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=it(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return l(t,"dropRecognizeWith",this)?this:(t=it(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(l(t,"requireFailure",this))return this;var e=this.requireFail;return t=it(t,this),w(e,t)===-1&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(l(t,"dropRequireFailure",this))return this;t=it(t,this);var e=w(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){n.manager.emit(e,t)}var n=this,i=this.state;i<be&&e(n.options.event+et(i)),e(n.options.event),t.additionalEvent&&e(t.additionalEvent),i>=be&&e(n.options.event+et(i))},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=ke)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(ke|ge)))return!1;t++}return!0},recognize:function(t){var e=mt({},t);return f(this.options.enable,[this,e])?(this.state&(we|Ce|ke)&&(this.state=ge),this.state=this.process(e),void(this.state&(_e|ye|be|Ce)&&this.tryEmit(e))):(this.reset(),void(this.state=ke))},process:function(t){},getTouchAction:function(){},reset:function(){}},d(rt,tt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=e&(_e|ye),r=this.attrTest(t);return i&&(n&Ut||!r)?e|Ce:i||r?n&qt?e|be:e&_e?e|ye:_e:ke}}),d(st,rt,{defaults:{event:"pan",threshold:10,pointers:1,direction:Wt},getTouchAction:function(){var t=this.options.direction,e=[];return t&Ht&&e.push(me),t&Bt&&e.push(fe),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,r=t.direction,s=t.deltaX,a=t.deltaY;return r&e.direction||(e.direction&Ht?(r=0===s?Ft:s<0?Nt:jt,n=s!=this.pX,i=Math.abs(t.deltaX)):(r=0===a?Ft:a<0?Lt:zt,n=a!=this.pY,i=Math.abs(t.deltaY))),t.direction=r,n&&i>e.threshold&&r&e.direction},attrTest:function(t){return rt.prototype.attrTest.call(this,t)&&(this.state&_e||!(this.state&_e)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=nt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),d(at,rt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[pe]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&_e)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),d(ot,tt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[he]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!i||!n||t.eventType&(qt|Ut)&&!r)this.reset();else if(t.eventType&Mt)this.reset(),this._timer=c(function(){this.state=we,this.tryEmit()},e.time,this);else if(t.eventType&qt)return we;return ke},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===we&&(t&&t.eventType&qt?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=wt(),this.manager.emit(this.options.event,this._input)))}}),d(ct,rt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[pe]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&_e)}}),d(lt,rt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Ht|Bt,pointers:1},getTouchAction:function(){return st.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(Ht|Bt)?e=t.overallVelocity:n&Ht?e=t.overallVelocityX:n&Bt&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&bt(e)>this.options.velocity&&t.eventType&qt},emit:function(t){var e=nt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),d(ut,tt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[de]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&Mt&&0===this.count)return this.failTimeout();if(i&&r&&n){if(t.eventType!=qt)return this.failTimeout();var s=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||U(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,a&&s?this.count+=1:this.count=1,this._input=t;var o=this.count%e.taps;if(0===o)return this.hasRequireFailures()?(this._timer=c(function(){this.state=we,this.tryEmit()},e.interval,this),_e):we}return ke},failTimeout:function(){return this._timer=c(function(){this.state=ke},this.options.interval,this),ke},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==we&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ht.VERSION="2.0.7",ht.defaults={domEvents:!1,touchAction:ue,enable:!0,inputTarget:null,inputClass:null,preset:[[ct,{enable:!1}],[at,{enable:!1},["rotate"]],[lt,{direction:Ht}],[st,{direction:Ht},["swipe"]],[ut],[ut,{event:"doubletap",taps:2},["tap"]],[ot]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var xe=1,Ee=2;dt.prototype={set:function(t){return mt(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?Ee:xe},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,i=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&we)&&(r=e.curRecognizer=null);for(var s=0;s<i.length;)n=i[s],e.stopped===Ee||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(t),!r&&n.state&(_e|ye|be)&&(r=e.curRecognizer=n),s++}},get:function(t){if(t instanceof tt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(l(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(l(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=w(e,t);n!==-1&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==o&&e!==o){var n=this.handlers;return u(b(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(t!==o){var n=this.handlers;return u(b(t),function(t){e?n[t]&&n[t].splice(w(n[t],e),1):delete n[t]}),this}},emit:function(t,e){this.options.domEvents&&ft(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](e),i++}},destroy:function(){this.element&&pt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},mt(ht,{INPUT_START:Mt,INPUT_MOVE:Rt,INPUT_END:qt,INPUT_CANCEL:Ut,STATE_POSSIBLE:ge,STATE_BEGAN:_e,STATE_CHANGED:ye,STATE_ENDED:be,STATE_RECOGNIZED:we,STATE_CANCELLED:Ce,STATE_FAILED:ke,DIRECTION_NONE:Ft,DIRECTION_LEFT:Nt,DIRECTION_RIGHT:jt,DIRECTION_UP:Lt,DIRECTION_DOWN:zt,DIRECTION_HORIZONTAL:Ht,DIRECTION_VERTICAL:Bt,DIRECTION_ALL:Wt,Manager:dt,Input:O,TouchAction:K,TouchInput:W,MouseInput:L,PointerEventInput:z,TouchMouseInput:X,SingleTouchInput:H,Recognizer:tt,AttrRecognizer:rt,Tap:ut,Pan:st,Swipe:lt,Pinch:at,Rotate:ct,Press:ot,on:v,off:g,each:u,merge:kt,extend:Ct,assign:mt,inherit:d,bindFn:p,prefixed:x});var Te="undefined"!=typeof r?r:"undefined"!=typeof self?self:{};Te.Hammer=ht,i=function(){return ht}.call(e,n,e,t),!(i!==o&&(t.exports=i))}(window,document,"Hammer")},function(t,e){"use strict";function n(t){if(t.$root===t)return"root instance";var e=t._isVue?t.$options.name||t.$options._componentTag:t.name;return(e?"component <"+e+">":"anonymous component")+(t._isVue&&t.$options.__file?" at "+t.$options.__file:"")}function i(t,e){if(e=e||window.Vue,e&&e.config){var i=e.config.errorHandler;e.config.errorHandler=function(e,r){t.captureException(e,{extra:{componentName:n(r),propsData:r.$options.propsData}}),"function"==typeof i&&i.call(this,e,r)}}}t.exports=i},function(t,e,n){"use strict";(function(e){var i=n(20),r="undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{},s=r.Raven,a=new i;a.noConflict=function(){return r.Raven=s,a},a.afterLoad(),t.exports=a}).call(e,n(0))},function(t,e,n){"use strict";(function(e){function n(t,e){window.console}function i(t,e,n){if("object"==typeof e)n(e);else{var i=e.call(this);if("function"==typeof i)if(i.resolved)n(i.resolved);else if(i.requested)i.pendingCallbacks.push(n);else{i.requested=!0;var s=i.pendingCallbacks=[n];i(function(t){i.resolved=t;for(var e=0,n=s.length;e<n;e++)s[e](t)},function(){n()})}else r(i)&&i.then(function(t){n(t)},function(){n()})["catch"](function(t){n()})}}function r(t){return t&&"function"==typeof t.then}function s(t){if(!b){var e=t.$watch("__watcher__",function(t){});b=t._watchers[0].constructor,e()}return b}function a(t){return!w&&t&&t._data&&t._data.__ob__&&t._data.__ob__.dep&&(w=t._data.__ob__.dep.constructor),w}function o(t){return null===t||void 0===t}function c(t,e){function n(n){var i=arguments.length;return i?i>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return n._length=t.length,n}function l(t){return null!==t&&"object"==typeof t}function u(t){return E.call(t)===T}function h(t,e){return O.call(t,e)}function d(t){return Y.test(t)}function p(t){var e=t.charCodeAt(0),n=t.charCodeAt(t.length-1);return e!==n||34!==e&&39!==e?t:t.slice(1,-1)}function f(t){if(void 0===t)return"eof";var e=t.charCodeAt(0);switch(e){case 91:case 93:case 46:case 34:case 39:case 48:return t;case 95:case 36:case 45:return"ident";case 32:case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return e>=97&&e<=122||e>=65&&e<=90?"ident":e>=49&&e<=57?"number":"else"}function m(t){var e=t.trim();return("0"!==t.charAt(0)||!isNaN(t))&&(d(e)?p(e):"*"+e)}function v(t){function e(){var e=t[u+1];if(h===H&&"'"===e||h===B&&'"'===e)return u++,i="\\"+e,p[M](),!0}var n,i,r,s,a,o,c,l=[],u=-1,h=F,d=0,p=[];for(p[R]=function(){void 0!==r&&(l.push(r),r=void 0)},p[M]=function(){void 0===r?r=i:r+=i},p[q]=function(){p[M](),d++},p[U]=function(){if(d>0)d--,h=z,p[M]();else{if(d=0,r=m(r),r===!1)return!1;p[R]()}};null!=h;)if(u++,n=t[u],"\\"!==n||!e()){if(s=f(n),c=X[h],a=c[s]||c["else"]||V,a===V)return;if(h=a[0],o=p[a[1]],o&&(i=a[2],i=void 0===i?n:i,o()===!1))return;if(h===W)return l.raw=t,l}}function g(t){var e=$[t];return e||(e=v(t),e&&($[t]=e)),e}function _(t,i){void 0===i&&(i={});var r=t.version&&Number(t.version.split(".")[0])||-1;if("production"!==e.env.NODE_ENV&&_.installed)return void n("already installed.");if("production"!==e.env.NODE_ENV&&r<2)return void n("vue-i18n ("+_.version+") need to use Vue 2.0 or later (Vue: "+t.version+").");var s="en";y(t,s),k(t,G),x(t,G),A(t,G,s),K(t)}function y(t,e){var n=t.config.silent;t.config.silent=!0,G||(G=new t({data:{lang:e,locales:{}}})),t.config.silent=n}var b,w,C,k=function(t,e){t.locale=function(t,r,s){return void 0===r?e.locales[t]:void(null===r?(e.locales[t]=void 0,delete e.locales[t]):i(t,r,function(i){i?e.$set(e.locales,t,i):n("failed set `"+t+"` locale"),s&&s()}))}},x=function(t,e){var n=t.prototype._init;t.prototype._init=function(t){var i=this;n.call(this,t),this.$parent||(this._$lang=e,this._langUnwatch=this._$lang.$watch("$data",function(t,e){i.$forceUpdate()},{deep:!0}))};var i=t.prototype._destroy;t.prototype._destroy=function(){!this.$parent&&this._langUnwatch&&(this._langUnwatch(),this._langUnwatch=null,this._$lang=null),i.apply(this,arguments)}},E=Object.prototype.toString,T="[object Object]",O=Object.prototype.hasOwnProperty,I=null,S=null,A=function(t,e,n){function i(t,e){var n=new r(e,t,null,{lazy:!0});return function(){return n.dirty&&n.evaluate(),o&&o.target&&n.depend(),n.value}}var r=s(e),o=a(e);Object.defineProperty(t.config,"lang",{enumerable:!0,configurable:!0,get:i(function(){return e.lang},e),set:c(function(t){e.lang=t},e)}),C=n,Object.defineProperty(t.config,"fallbackLang",{enumerable:!0,configurable:!0,get:function(){return C},set:function(t){C=t}}),Object.defineProperty(t.config,"missingHandler",{enumerable:!0,configurable:!0,get:function(){return I},set:function(t){I=t}}),Object.defineProperty(t.config,"i18nFormatter",{enumerable:!0,configurable:!0,get:function(){return S},set:function(t){S=t}})},P=/(%|)\{([0-9a-zA-Z_]+)\}/g,D=function(t){function e(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return e=1===e.length&&"object"==typeof e[0]?e[0]:{},e&&e.hasOwnProperty||(e={}),t.replace(P,function(n,i,r,s){var a;return"{"===t[s-1]&&"}"===t[s+n.length]?r:(a=h(e,r)?e[r]:n,o(a)?"":a)})}return e},$=Object.create(null),M=0,R=1,q=2,U=3,F=0,N=1,j=2,L=3,z=4,H=5,B=6,W=7,V=8,X=[];X[F]={ws:[F],ident:[L,M],"[":[z],eof:[W]},X[N]={ws:[N],".":[j],"[":[z],eof:[W]},X[j]={ws:[j],ident:[L,M],0:[L,M],number:[L,M]},X[L]={ident:[L,M],0:[L,M],number:[L,M],ws:[N,R],".":[j,R],"[":[z,R],eof:[W,R]},X[z]={"'":[H,M],'"':[B,M],"[":[z,q],"]":[N,U],eof:V,"else":[z,M]},X[H]={"'":[z,M],eof:V,"else":[H,M]},X[B]={'"':[z,M],eof:V,"else":[B,M]};var G,Y=/^\s?(true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/,Z=function(t){function e(t){if(null===t||void 0===t)return!0;if(Array.isArray(t)){if(t.length>0)return!1;if(0===t.length)return!0}else if(u(t))for(var e in t)if(h(t,e))return!1;return!0}function n(t,n){if(!l(t))return null;var i=g(n);if(e(i))return null;for(var r=i.length,s=null,a=t,o=0;o<r;){var c=a[i[o]];if(void 0===c){a=null;break}a=c,o++}return s=a}return n},K=function(t){function i(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];var i=t.config.lang,r=t.config.fallbackLang;return 1===e.length?l(e[0])||Array.isArray(e[0])?e=e[0]:"string"==typeof e[0]&&(i=e[0]):2===e.length&&("string"==typeof e[0]&&(i=e[0]),(l(e[1])||Array.isArray(e[1]))&&(e=e[1])),{lang:i,fallback:r,params:e}}function r(t,e){return!(!t||!e)&&!o(g(t,e))}function s(e,i,r){if(!e)return null;var a=g(e,i);if(Array.isArray(a))return a;if(o(a)&&(a=e[i]),o(a))return null;if("string"!=typeof a)return n("Value of key '"+i+"' is not a string!"),null;if(a.indexOf("@:")>=0){var c=a.match(/(@:[\w|.]+)/g);for(var l in c){var u=c[l],h=u.substr(2),d=s(e,h,r);a=a.replace(u,d)}}return r?t.config.i18nFormatter?t.config.i18nFormatter.apply(null,[a].concat(r)):v(a,r):a}function a(t,i,r,a,c){var l=null;return l=s(t(i),a,c),o(l)?(l=s(t(r),a,c),o(l)?null:("production"!==e.env.NODE_ENV&&n('Fall back to translate the keypath "'+a+'" with "'+r+'" language.'),l)):l}function u(i,r,s,a){return o(a)?(t.config.missingHandler?t.config.missingHandler.apply(null,[i,r,s]):"production"!==e.env.NODE_ENV&&n('Cannot translate the value of keypath "'+r+'". Use the value of keypath as default'),r):a}function h(e){return t.locale(e)}function d(t){return this.$options.locales[t]}function p(t){return t?t>1?1:0:1}function f(t,e){return t=Math.abs(t),2===e?p(t):t?Math.min(t,2):0}function m(t,e){if(!t&&"string"!=typeof t)return null;var n=t.split("|");return e=f(e,n.length),n[e]?n[e].trim():t}var v=D(t),g=Z(t);return t.t=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if(!t)return"";var r=i.apply(void 0,e),s=r.lang,o=r.fallback,c=r.params;return u(s,t,null,a(h,s,o,t,c))},t.tc=function(e,n){for(var i=[],r=arguments.length-2;r-- >0;)i[r]=arguments[r+2];return m(t.t.apply(t,[e].concat(i)),n)},t.te=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var s=i.apply(void 0,e),a=s.lang;return r(h(a),t)},t.prototype.$t=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if(!t)return"";var r=i.apply(void 0,e),s=r.lang,o=r.fallback,l=r.params,p=null;return this.$options.locales&&(p=a(c(d,this),s,o,t,l))?p:u(s,t,this,a(h,s,o,t,l))},t.prototype.$tc=function(t,e){for(var n=[],i=arguments.length-2;i-- >0;)n[i]=arguments[i+2];return"number"!=typeof e&&"undefined"!=typeof e?t:m((r=this).$t.apply(r,[t].concat(n)),e);var r},t.prototype.$te=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var s=i.apply(void 0,e),a=s.lang,o=!1;return this.$options.locales&&(o=r(c(d)(a),t)),o||(o=r(h(a),t)),o},t.mixin({computed:{$lang:function(){return t.config.lang}}}),t};_.version="__VERSION__","undefined"!=typeof window&&window.Vue&&window.Vue.use(_),t.exports=_}).call(e,n(17))},function(t,e,n){var i,r;i=n(11);var s=n(27);r=i=i||{},"object"!=typeof i["default"]&&"function"!=typeof i["default"]||(r=i=i["default"]),"function"==typeof r&&(r=r.options),r.render=s.render,r.staticRenderFns=s.staticRenderFns,t.exports=i},function(t,e,n){var i,r;i=n(12);var s=n(25);r=i=i||{},"object"!=typeof i["default"]&&"function"!=typeof i["default"]||(r=i=i["default"]),"function"==typeof r&&(r=r.options),r.render=s.render,r.staticRenderFns=s.staticRenderFns,t.exports=i},function(t,e,n){var i,r;i=n(14);var s=n(28);r=i=i||{},"object"!=typeof i["default"]&&"function"!=typeof i["default"]||(r=i=i["default"]),"function"==typeof r&&(r=r.options),r.render=s.render,r.staticRenderFns=s.staticRenderFns,t.exports=i},function(t,e,n){var i,r;i=n(15);var s=n(24);r=i=i||{},"object"!=typeof i["default"]&&"function"!=typeof i["default"]||(r=i=i["default"]),"function"==typeof r&&(r=r.options),r.render=s.render,r.staticRenderFns=s.staticRenderFns,t.exports=i},function(t,e,n){"use strict";var i=n(1);e["default"]={props:["activity"],mixins:[i.a],mounted:function(){this.baseUrl=window.SmartZoos.config.base_url},data:function(){return{icons:["active","inactive","correct","incorrect"],baseUrl:""}},methods:{open:function(){this.$nextTick(function(){$(this.$refs.modal).modal("show")})},close:function(){this.$nextTick(function(){$(this.$refs.modal).modal("hide")})},getIconText:function(t){return this.$t("icons."+t)}}}},function(t,e,n){"use strict";function i(t,e,n,i){var r=document.createElement("div");r.id="sz-map-controls",t.appendChild(r);
var s=document.createElement("i");s.className="label label-success",s.style.fontSize="20px",s.style.position="relative",s.style.top="-7px",s.style.marginLeft="5px",s.style.marginRight="5px",s.textContent=i.getAnsweredQuestionsCount()+"/"+_.size(i.game.activity.questions),r.appendChild(s),i.$watch("game.answers",function(){s.textContent=i.getAnsweredQuestionsCount()+"/"+_.size(i.game.activity.questions)});var a=document.createElement("i");a.className="mdi mdi-information-outline",a.title=i.$t("info"),r.appendChild(a),a.addEventListener("click",function(){i.$parent.$refs.informationModal.open()});var o=document.createElement("i");o.className="mdi mdi-navigation",o.title=i.$t("position-tracking"),r.appendChild(o),o.addEventListener("click",function(){e.szTrackingEnabled?(e.szTrackingEnabled=!1,o.className="mdi mdi-navigation"):(e.panTo(n.getPosition()),google.maps.event.trigger(n,"click"),e.szTrackingEnabled=!0,o.className="mdi mdi-navigation active")});var c=document.createElement("i");c.className="mdi mdi-map-marker-multiple",c.title=i.$t("apply-item-bounds"),r.appendChild(c),c.addEventListener("click",function(){var t=i.getMarkerBounds();t.isEmpty()||e.fitBounds(t)});var l=document.createElement("i");l.className="mdi mdi-exit-to-app",l.title=i.$t("exit"),r.appendChild(l),l.addEventListener("click",function(){i.$parent.exit()})}var r=n(1),s=window.SmartZoos.config.connect_markers||!1;e["default"]={components:{"game-question-modal":n(23)},props:["latitude","longitude","game","baseUrl"],mixins:[r.a],mounted:function(){this.mapData={},this.mapData.markers=[],this.mapData.mapOptions={center:{lat:this.latitude,lng:this.longitude},zoom:18,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,zoomControl:!0,streetViewControl:!0,styles:[{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"transit.station",stylers:[{visibility:"off"}]}]},this.mapData.iconAnchor=new google.maps.Point(20,20),this.mapData.iconSize=new google.maps.Size(60,60),this.mapData.iconScaledSize=new google.maps.Size(40,40),this.initMap()},data:function(){return{question:null,gpsError:!1}},watch:{gpsError:function(t){var e=document.getElementById("sz-map-controls");if(e){var n="sz-gps-error",i=document.getElementById("sz-gps-error");t===!0?i?i.style.display="initial":this.initGpsErrorControl(n):i&&(i.style.display="none")}}},methods:{initMap:function(){var t=this;if(this.mapData.map=new google.maps.Map(document.getElementById("map"),this.mapData.mapOptions),this.mapData.infoWindow=new google.maps.InfoWindow,this.initGroundOverlays(),this.initPlayerMarker(),this.initGameControls(),this.$parent.getGeoLocation(function(e){var n=t.mapData.map,i=t.mapData.playerMarker;t.gpsError=!1,i.setPosition({lat:e.coords.latitude,lng:e.coords.longitude}),n.szTrackingEnabled===!0&&n.panTo(i.getPosition()),t.initUpdateClosestUnansweredMarkerArrow(),t.hasProximityCheck()&&_.each(t.mapData.markers,function(e){t.isAnswered(e.questionId)||t.detectAndSetMarkerIcon(e)})},!0,function(e){t.gpsError=!0}),t.game.activity.questions){var e=t.mapData.map,n=t.mapData.markers,i=(t.mapData.infoWindow,t.mapData.playerMarker);_.each(t.game.activity.questions,function(r){var s=new google.maps.Marker({title:r.title,position:{lat:Number(r.latitude),lng:Number(r.longitude)},map:e,animation:google.maps.Animation.DROP,questionId:r.id,optimized:!1});t.detectAndSetMarkerIcon(s),n.push(s),s.addListener("click",function(){if(!t.isAnswered(r.id))if(t.hasProximityCheck()){var e=google.maps.geometry.spherical.computeDistanceBetween(i.getPosition(),s.getPosition());e<=t.getProximityRadius()&&t.openQuestionModal(r)}else t.openQuestionModal(r)})}),s&&t.connectMarkers(),t.initUpdateClosestUnansweredMarkerArrow()}},initGroundOverlays:function(){this.mapData.skansenGroundOverlay=new google.maps.GroundOverlay(this.baseUrl+"/img/map/overlays/skansen.png",{north:59.329167,south:59.324011,east:18.111242,west:18.099022},{clickable:!1,map:this.mapData.map})},initGameControls:function(){var t=this.mapData.map,e=this.mapData.playerMarker,n=document.createElement("div"),r=new i(n,t,e,this);r.index=1,t.controls[google.maps.ControlPosition.TOP_RIGHT].push(n)},initGpsErrorControl:function(t){var e=document.createElement("div");e.id=t,e.innerHTML="<span>"+this.$t("gps-error")+"</span>",e.style["margin-top"]=document.getElementById("sz-map-controls").offsetHeight+"px",this.mapData.map.controls[google.maps.ControlPosition.TOP_LEFT].push(e)},closeInfoWindow:function(){var t=this.mapData.infoWindow;t&&t.getMap()&&t.close()},initPlayerMarker:function(){var t,e,n,i=this,r=this.mapData.map,s=this.mapData.infoWindow;t={path:google.maps.SymbolPath.CIRCLE,fillColor:"red",fillOpacity:1,scale:4.5,strokeColor:"white",strokeWeight:1};var e=new google.maps.Marker({title:this.$t("its-you"),position:{lat:this.latitude,lng:this.longitude},map:r,icon:t});if(e.addListener("click",function(){i.closeInfoWindow(),s.setContent(this.title),s.open(r,this)}),this.hasProximityCheck()){var n=new google.maps.Circle({map:r,radius:this.getProximityRadius(),fillColor:"blue",fillOpacity:.25,strokeColor:"blue",strokeWeight:1,strokeOpacity:.5});n.bindTo("center",e,"position")}google.maps.event.trigger(e,"click"),this.mapData.playerMarker=e},isAnswered:function(t){return _.has(this.game.answers,t)},isCorrect:function(t){var e=_.get(this.game.answers,t,null);return e&&e.correct===!0},markAnswered:function(t,e){var n=this;this.$set(this.game.answers,t,e);var i=_.find(this.mapData.markers,function(e){return e.questionId===t});i&&this.detectAndSetMarkerIcon(i);var r=_.keys(this.game.answers).map(function(t){return _.toNumber(t)}),s=_.map(this.game.activity.questions,function(t){return t.id});this.initUpdateClosestUnansweredMarkerArrow(),_.intersection(s,r).length===s.length&&(this.game.complete=!0,this.$nextTick(function(){n.$parent.$refs.resultsModal.open()}))},connectMarkers:function(){var t=this.mapData.map,e=this.mapData.markers;e.length>1&&_.each(e,function(n,i){if(0!==i){new google.maps.Polyline({path:[e[i-1].getPosition(),e[i].getPosition()],strokeWeight:2,strokeOpacity:.5,icons:[{icon:{path:google.maps.SymbolPath.FORWARD_CLOSED_ARROW},offset:"100%"}],geodesic:!0,map:t})}})},hasProximityCheck:function(){return this.game.activity.proximity_check},getProximityRadius:function(){return this.game.activity.proximity_radius||25},openQuestionModal:function(t){var e=this;this.question=t,this.$nextTick(function(){e.$refs.questionModal.open()})},detectMarkerIconState:function(t){var e=_.find(this.game.activity.questions,["id",t.questionId]);if(this.isAnswered(e.id))return this.isCorrect(e.id)?"correct":"incorrect";if(this.hasProximityCheck()){var n=google.maps.geometry.spherical.computeDistanceBetween(this.mapData.playerMarker.getPosition(),t.getPosition());if(n>this.getProximityRadius())return"inactive"}return"active"},detectAndSetMarkerIcon:function(t){var e=this.detectMarkerIconState(t);t.setIcon({anchor:this.mapData.iconAnchor,size:this.mapData.iconSize,scaledSize:this.mapData.iconScaledSize,url:this.getIconUrl(e)})},getMarkerBounds:function(){if(this.mapData.markerBounds)return this.mapData.markerBounds;if(this.mapData.markerBounds=new google.maps.LatLngBounds,this.mapData.markers.length>0){var t=this;_.each(this.mapData.markers,function(e){t.mapData.markerBounds.extend(e.getPosition())})}return this.mapData.markerBounds},getAnsweredQuestionsCount:function(){if(0===_.size(this.game.activity.questions)||0===_.size(this.game.answers))return 0;var t=_.map(this.game.activity.questions,function(t){return t.id}),e=_.filter(this.game.answers,function(e){return t.indexOf(e.question)!==-1});return _.size(e)},getClosestUnansweredMarker:function(){var t=this,e=_.filter(this.mapData.markers,function(e){return!t.isAnswered(e.questionId)}),n=this.mapData.playerMarker;return e.length>0?_.minBy(e,function(t){return google.maps.geometry.spherical.computeDistanceBetween(n.getPosition(),t.getPosition())}):null},initUpdateClosestUnansweredMarkerArrow:function(){var t=this,e=t.getClosestUnansweredMarker();return e?void(t.mapData.closestUnansweredMarkerArrow?t.mapData.closestUnansweredMarkerArrow.setPath([t.mapData.playerMarker.getPosition(),e.getPosition()]):t.mapData.closestUnansweredMarkerArrow=new google.maps.Polyline({path:[t.mapData.playerMarker.getPosition(),e.getPosition()],strokeColor:"red",strokeWeight:2,strokeOpacity:.4,icons:[{icon:{path:google.maps.SymbolPath.FORWARD_CLOSED_ARROW,fillColor:"red",strokeColor:"red",fillOpacity:.8,strokeOpacity:.8,scale:4},offset:"50px"}],geodesic:!0,map:t.mapData.map,zIndex:2})):void(t.mapData.closestUnansweredMarkerArrow&&t.mapData.closestUnansweredMarkerArrow.setMap(null))}}}},function(t,e,n){"use strict";var i=n(16);e["default"]={props:["question","gameId","baseUrl"],mixins:[i.a],mounted:function(){var t=this,e=this;this.$nextTick(function(){$(t.$refs.modal).on("hide.bs.modal",function(t){e.inAjaxCall&&t.preventDefault()})})},data:function(){return{selectedOptions:[],textualAnswer:"",hasImageSelected:!1,imageSrc:null,chosenPair:{option:null,match:null},matchedPairs:[],shuffledPairs:[],matchableStyles:{"min-height":"100px"},inAjaxCall:!1,incorrectImageFormat:!1}},methods:{open:function(){var t=this;this.$nextTick(function(){t.isMatchPairs()?(t.pairs().length>0&&(t.question.pairs=_.shuffle(t.pairs()),$(t.$refs.modal).one("shown.bs.modal",function(e){var n=t,i=_.map(t.$refs.matchable,function(t){return $(t).outerHeight(!0)}),r=_.max(i);r&&(n.matchableStyles["min-height"]=r+"px")})),t.shuffledPairs=_.shuffle(t.pairs())):(t.isOneCorrectAnswer()||t.isMultipleCorrectAnswers())&&t.options().length>0&&(t.question.options=_.shuffle(t.options())),$(t.$refs.modal).modal("show")})},close:function(){var t=this;this.inAjaxCall||this.$nextTick(function(){$(t.$refs.modal).modal("hide"),t.selectedOptions=[],t.textualAnswer="",t.hasImageSelected=!1,t.imageSrc=null,t.chosenPair.option=null,t.chosenPair.mathc=null,t.matchedPairs=[],t.shuffledPairs=[],t.matchableStyles["min-height"]="100px",t.inAjaxCall=!1,$(t.$refs.image).val(""),t.incorrectImageFormat=!1})},submit:function(){if(!this.inAjaxCall){var t=this;this.inAjaxCall=!0;var e={game_id:this.gameId,question_id:this.question.id};if(this.isOneCorrectAnswer()||this.isMultipleCorrectAnswers()?e.options=this.selectedOptions:(this.isFreeformAnswer()||this.isEmbeddedContent())&&(e.text=this.textualAnswer),this.isPhoto()){var n=new FormData;_.each(e,function(t,e){n.append(e,t)}),n.append("image",this.$refs.image.files[0]),e=n}this.$http.post(t.baseUrl+"/api/games/answer",e).then(function(e){t.inAjaxCall=!1;var n=t.question.id;$(t.$refs.modal).one("hidden.bs.modal",function(i){t.$parent.markAnswered(n,e.body)}),t.close()},function(e){t.inAjaxCall=!1})}},title:function(){return this.question?this.question.title:""},description:function(){return this.question?this.question.description:""},hasImage:function(){return this.question&&this.question.image},image:function(){return this.question?this.question.image:""},embeddedContent:function(){return this.question?this.question.embedded_content:""},hasReadMore:function(){return this.question&&this.question.read_more},readMore:function(){return this.question?this.question.read_more:""},options:function(){return this.question&&this.question.options?this.question.options:[]},pairs:function(t){return t===!0?this.shuffledPairs:this.question&&this.question.pairs?this.question.pairs:[]},isInformation:function(){return!!this.question&&1==this.question.type},isOneCorrectAnswer:function(){return!!this.question&&2==this.question.type},isMultipleCorrectAnswers:function(){return!!this.question&&3==this.question.type},isFreeformAnswer:function(){return!!this.question&&4==this.question.type},isMatchPairs:function(){return!!this.question&&5==this.question.type},isEmbeddedContent:function(){return!!this.question&&6==this.question.type},isPhoto:function(){return!!this.question&&7==this.question.type},isSelectedOption:function(t){return this.selectedOptions&&"object"==typeof this.selectedOptions?this.selectedOptions.indexOf(t)!==-1:this.selectedOptions===t},triggerOptionClick:function(t){$(this.$refs.option[t]).trigger("click")},triggerImageClick:function(){$(this.$refs.image).trigger("click")},imageSelected:function(){if(event.target.files.length>0){var t=event.target.files[0];if(!this.isValidImageFormat(t))return $(event.target).val(""),this.hasImageSelected=!1,void(this.incorrectImageFormat=!0);if(window.FileReader){var e=new FileReader,n=this;e.onload=function(t){n.imageSrc=t.target.result},e.readAsDataURL(t)}this.hasImageSelected=!0,this.incorrectImageFormat=!1}},canSubmit:function(){return!!this.isInformation()||(this.isOneCorrectAnswer()||this.isMultipleCorrectAnswers()?"object"==typeof this.selectedOptions?this.selectedOptions.length>0:!!this.selectedOptions:this.isFreeformAnswer()||this.isEmbeddedContent()?!!this.textualAnswer.trim():this.isMatchPairs()?this.matchedPairs.length===this.pairs().length:!!this.isPhoto()&&this.hasImageSelected)},resetChosenPair:function(){var t=this;this.$nextTick(function(){var e=t;setTimeout(function(){e.chosenPair.option=null,e.chosenPair.match=null},250)})},choose:function(t,e){this.isMatchedPair(e)||(this.chosenPair[t]=e.id,this.chosenPair.option===this.chosenPair.match?(this.matchedPairs.push(e.id),this.resetChosenPair()):null!==this.chosenPair.option&&null!==this.chosenPair.match&&this.resetChosenPair())},choosePair:function(t){this.choose("option",t)},choosePairMatch:function(t){this.choose("match",t)},isOptionChosen:function(t){return this.chosenPair.option===t.id},isOptionMatchChosen:function(t){return this.chosenPair.match===t.id},isMatchedPair:function(t){return this.matchedPairs.indexOf(t.id)!==-1},isCorrectlyAnswered:function(t){return!1},isIncorrectlyAnswered:function(t){return!1}}}},function(t,e,n){"use strict";e["default"]={props:["activity","answers"],mounted:function(){},methods:{open:function(){var t=this;this.$nextTick(function(){$(t.$refs.modal).modal("show")})},exit:function(){this.$parent.exit()},isInformation:function(t){return!!t&&1==t.type},isOneCorrectAnswer:function(t){return!!t&&2==t.type},isMultipleCorrectAnswers:function(t){return!!t&&3==t.type},isFreeformAnswer:function(t){return!!t&&4==t.type},isMatchPairs:function(t){return!!t&&5==t.type},isEmbeddedContent:function(t){return!!t&&6==t.type},isPhoto:function(t){return!!t&&7==t.type},hasAnswer:function(t){return!(!this.answers||!this.answers[t.id])},isCorrect:function(t){return!!this.hasAnswer(t)&&this.answers[t.id].correct},hasOptions:function(t){return!!this.hasAnswer(t)&&!!this.answers[t.id].answer.options},choseOption:function(t,e){return!!this.hasOptions(t)&&this.answers[t.id].answer.options.indexOf(e.id)!==-1},hasText:function(t){return!!this.hasAnswer(t)&&!!this.answers[t.id].answer.text},getText:function(t){return this.answers[t.id].answer.text},hasImage:function(t){return!!this.hasAnswer(t)&&!!this.answers[t.id].image},getImage:function(t){return this.answers[t.id].image}}}},function(t,e,n){"use strict";e["default"]={props:["activity"],mounted:function(){this.baseUrl=window.SmartZoos.config.base_url;var t=this;this.hammertime=new Hammer.Manager(this.$refs.tips,{recognizers:[[Hammer.Swipe,{direction:Hammer.DIRECTION_HORIZONTAL}]]}),this.hammertime.on("swipeleft",function(){t.nextItem(),t.isLastItem()&&t.close()}),this.hammertime.on("swiperight",function(){t.previousItem()})},data:function(){return{baseUrl:"",currentItem:"look_closely",items:["look_closely","look_out","do_not_disturb","help_others"],enterActiveClass:"animated slideInRight",leaveActiveClass:"animated slideOutLeft"}},methods:{open:function(){var t=this;this.$nextTick(function(){$(t.$refs.modal).modal("show")})},close:function(){var t=this;this.$nextTick(function(){$(t.$refs.modal).modal("hide"),t.$root.$emit("dialog:tutorial:close")})},getItemImageUrl:function(t){return this.baseUrl+"/img/guidelines/"+t+".jpg"},isFirstItem:function(){return 0===this.items.indexOf(this.currentItem)},isLastItem:function(){return this.items.indexOf(this.currentItem)===this.items.length-1},nextItem:function(){var t=this;if(!this.isLastItem()&&this.currentItem){var e=this;this.enterActiveClass="animated slideInRight",this.leaveActiveClass="animated slideOutLeft",$(this.$refs.tips).css("min-height",$(this.$refs.tips).height()),this.$nextTick(function(){e.currentItem=e.items[e.items.indexOf(e.currentItem)+1],setTimeout(function(){$(t.$refs.tips).css("min-height","")},2e3)})}},previousItem:function(){var t=this;if(!this.isFirstItem()&&this.currentItem){var e=this;this.enterActiveClass="animated slideInLeft",this.leaveActiveClass="animated slideOutRight",$(this.$refs.tips).css("min-height",$(this.$refs.tips).height()),this.$nextTick(function(){e.currentItem=e.items[e.items.indexOf(e.currentItem)-1],setTimeout(function(){$(t.$refs.tips).css("min-height","")},2e3)})}}}}},function(t,e,n){"use strict";e.a={methods:{isValidImageFormat:function(t){return"image/jpg"===t.type||"image/jpeg"===t.type||"image/png"==t.type}}}},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(t){if(u===setTimeout)return setTimeout(t,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function s(t){if(h===clearTimeout)return clearTimeout(t);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function a(){m&&p&&(m=!1,p.length?f=p.concat(f):v=-1,f.length&&o())}function o(){if(!m){var t=r(a);m=!0;for(var e=f.length;e;){for(p=f,f=[];++v<e;)p&&p[v].run();v=-1,e=f.length}p=null,m=!1,s(t)}}function c(t,e){this.fun=t,this.array=e}function l(){}var u,h,d=t.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(t){u=n}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(t){h=i}}();var p,f=[],m=!1,v=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];f.push(new c(t,e)),1!==f.length||m||r(o)},c.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.prependListener=l,d.prependOnceListener=l,d.listeners=function(t){return[]},d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(t,e){"use strict";function n(t){this.name="RavenConfigError",this.message=t}n.prototype=new Error,n.prototype.constructor=n,t.exports=n},function(t,e){"use strict";var n=function(t,e,n){var i=t[e],r=t;if(e in t){var s="warn"===e?"warning":e;t[e]=function(){var t=[].slice.call(arguments),e=""+t.join(" "),a={level:s,logger:"console",extra:{arguments:t}};n&&n(e,a),i&&Function.prototype.apply.call(i,r,t)}}};t.exports={wrapMethod:n}},function(t,e,n){"use strict";(function(e){function i(){return+new Date}function r(t,e){return o(e)?function(n){return e(n,t)}:e}function s(){this._hasJSON=!("object"!=typeof JSON||!JSON.stringify),this._hasDocument=!a(R),this._hasNavigator=!a(q),this._lastCapturedException=null,this._lastData=null,this._lastEventId=null,this._globalServer=null,this._globalKey=null,this._globalProject=null,this._globalContext={},this._globalOptions={logger:"javascript",ignoreErrors:[],ignoreUrls:[],whitelistUrls:[],includePaths:[],crossOrigin:"anonymous",collectWindowErrors:!0,maxMessageLength:0,maxUrlLength:250,stackTraceLimit:50,autoBreadcrumbs:!0,instrument:!0,sampleRate:1},this._ignoreOnError=0,this._isRavenInstalled=!1,this._originalErrorStackTraceLimit=Error.stackTraceLimit,this._originalConsole=M.console||{},this._originalConsoleMethods={},this._plugins=[],this._startTime=i(),this._wrappedBuiltIns=[],this._breadcrumbs=[],this._lastCapturedEvent=null,this._keypressTimeout,this._location=M.location,this._lastHref=this._location&&this._location.href,this._resetBackoff();for(var t in this._originalConsole)this._originalConsoleMethods[t]=this._originalConsole[t]}function a(t){return void 0===t}function o(t){return"function"==typeof t}function c(t){return"[object String]"===U.toString.call(t)}function l(t){for(var e in t)return!1;return!0}function u(t,e){var n,i;if(a(t.length))for(n in t)f(t,n)&&e.call(null,n,t[n]);else if(i=t.length)for(n=0;n<i;n++)e.call(null,n,t[n])}function h(t,e){return e?(u(e,function(e,n){t[e]=n}),t):t}function d(t){return!!Object.isFrozen&&Object.isFrozen(t)}function p(t,e){return!e||t.length<=e?t:t.substr(0,e)+"…"}function f(t,e){return U.hasOwnProperty.call(t,e)}function m(t){for(var e,n=[],i=0,r=t.length;i<r;i++)e=t[i],c(e)?n.push(e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):e&&e.source&&n.push(e.source);return new RegExp(n.join("|"),"i")}function v(t){var e=[];return u(t,function(t,n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}),e.join("&")}function g(t){var e=t.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};var n=e[6]||"",i=e[8]||"";return{protocol:e[2],host:e[4],path:e[5],relative:e[5]+n+i}}function _(){var t=M.crypto||M.msCrypto;if(!a(t)&&t.getRandomValues){var e=new Uint16Array(8);t.getRandomValues(e),e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;var n=function(t){for(var e=t.toString(16);e.length<4;)e="0"+e;return e};return n(e[0])+n(e[1])+n(e[2])+n(e[3])+n(e[4])+n(e[5])+n(e[6])+n(e[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"===t?e:3&e|8;return n.toString(16)})}function y(t){for(var e,n=5,i=80,r=[],s=0,a=0,o=" > ",c=o.length;t&&s++<n&&(e=b(t),!("html"===e||s>1&&a+r.length*c+e.length>=i));)r.push(e),a+=e.length,t=t.parentNode;return r.reverse().join(o)}function b(t){var e,n,i,r,s,a=[];if(!t||!t.tagName)return"";if(a.push(t.tagName.toLowerCase()),t.id&&a.push("#"+t.id),e=t.className,e&&c(e))for(n=e.split(/\s+/),s=0;s<n.length;s++)a.push("."+n[s]);var o=["type","name","title","alt"];for(s=0;s<o.length;s++)i=o[s],r=t.getAttribute(i),r&&a.push("["+i+'="'+r+'"]');return a.join("")}function w(t,e){return!!(!!t^!!e)}function C(t,e){return!w(t,e)&&(t=t.values[0],e=e.values[0],t.type===e.type&&t.value===e.value&&k(t.stacktrace,e.stacktrace))}function k(t,e){if(w(t,e))return!1;var n=t.frames,i=e.frames;if(n.length!==i.length)return!1;for(var r,s,a=0;a<n.length;a++)if(r=n[a],s=i[a],r.filename!==s.filename||r.lineno!==s.lineno||r.colno!==s.colno||r["function"]!==s["function"])return!1;return!0}function x(t,e,n,i){var r=t[e];t[e]=n(r),i&&i.push([t,e,r])}var E=n(21),T=n(22),O=n(18),I=n(2),S=I.isError,A=I.isObject,P=n(19).wrapMethod,D="source protocol user pass host port path".split(" "),$=/^(?:(\w+):)?\/\/(?:(\w+)(:\w+)?@)?([\w\.-]+)(?::(\d+))?(\/.*)/,M="undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{},R=M.document,q=M.navigator;s.prototype={VERSION:"3.17.0",debug:!1,TraceKit:E,config:function(t,e){var n=this;if(n._globalServer)return this._logDebug("error","Error: Raven has already been configured"),n;if(!t)return n;var i=n._globalOptions;e&&u(e,function(t,e){"tags"===t||"extra"===t||"user"===t?n._globalContext[t]=e:i[t]=e}),n.setDSN(t),i.ignoreErrors.push(/^Script error\.?$/),i.ignoreErrors.push(/^Javascript error: Script error\.? on line 0$/),i.ignoreErrors=m(i.ignoreErrors),i.ignoreUrls=!!i.ignoreUrls.length&&m(i.ignoreUrls),i.whitelistUrls=!!i.whitelistUrls.length&&m(i.whitelistUrls),i.includePaths=m(i.includePaths),i.maxBreadcrumbs=Math.max(0,Math.min(i.maxBreadcrumbs||100,100));var r={xhr:!0,console:!0,dom:!0,location:!0},s=i.autoBreadcrumbs;"[object Object]"==={}.toString.call(s)?s=h(r,s):s!==!1&&(s=r),i.autoBreadcrumbs=s;var a={tryCatch:!0},o=i.instrument;return"[object Object]"==={}.toString.call(o)?o=h(a,o):o!==!1&&(o=a),i.instrument=o,E.collectWindowErrors=!!i.collectWindowErrors,n},install:function(){var t=this;return t.isSetup()&&!t._isRavenInstalled&&(E.report.subscribe(function(){t._handleOnErrorStackInfo.apply(t,arguments)}),t._globalOptions.instrument&&t._globalOptions.instrument.tryCatch&&t._instrumentTryCatch(),t._globalOptions.autoBreadcrumbs&&t._instrumentBreadcrumbs(),t._drainPlugins(),t._isRavenInstalled=!0),Error.stackTraceLimit=t._globalOptions.stackTraceLimit,this},setDSN:function(t){var e=this,n=e._parseDSN(t),i=n.path.lastIndexOf("/"),r=n.path.substr(1,i);e._dsn=t,e._globalKey=n.user,e._globalSecret=n.pass&&n.pass.substr(1),e._globalProject=n.path.substr(i+1),e._globalServer=e._getGlobalServer(n),e._globalEndpoint=e._globalServer+"/"+r+"api/"+e._globalProject+"/store/",this._resetBackoff()},context:function(t,e,n){return o(t)&&(n=e||[],e=t,t=void 0),this.wrap(t,e).apply(this,n)},wrap:function(t,e,n){function i(){var i=[],s=arguments.length,a=!t||t&&t.deep!==!1;for(n&&o(n)&&n.apply(this,arguments);s--;)i[s]=a?r.wrap(t,arguments[s]):arguments[s];try{return e.apply(this,i)}catch(c){throw r._ignoreNextOnError(),r.captureException(c,t),c}}var r=this;if(a(e)&&!o(t))return t;if(o(t)&&(e=t,t=void 0),!o(e))return e;try{if(e.__raven__)return e;if(e.__raven_wrapper__)return e.__raven_wrapper__}catch(s){return e}for(var c in e)f(e,c)&&(i[c]=e[c]);return i.prototype=e.prototype,e.__raven_wrapper__=i,i.__raven__=!0,i.__inner__=e,i},uninstall:function(){return E.report.uninstall(),this._restoreBuiltIns(),Error.stackTraceLimit=this._originalErrorStackTraceLimit,this._isRavenInstalled=!1,this},captureException:function(t,e){if(!S(t))return this.captureMessage(t,h({trimHeadFrames:1,stacktrace:!0},e));this._lastCapturedException=t;try{var n=E.computeStackTrace(t);this._handleStackInfo(n,e)}catch(i){if(t!==i)throw i}return this},captureMessage:function(t,e){if(!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(t)){e=e||{};var n=h({message:t+""},e);if(this._globalOptions.stacktrace||e&&e.stacktrace){var i;try{throw new Error(t)}catch(r){i=r}i.name=null,e=h({fingerprint:t,trimHeadFrames:(e.trimHeadFrames||0)+1},e);var s=E.computeStackTrace(i),a=this._prepareFrames(s,e);n.stacktrace={frames:a.reverse()}}return this._send(n),this}},captureBreadcrumb:function(t){var e=h({timestamp:i()/1e3},t);if(o(this._globalOptions.breadcrumbCallback)){var n=this._globalOptions.breadcrumbCallback(e);if(A(n)&&!l(n))e=n;else if(n===!1)return this}return this._breadcrumbs.push(e),this._breadcrumbs.length>this._globalOptions.maxBreadcrumbs&&this._breadcrumbs.shift(),this},addPlugin:function(t){var e=[].slice.call(arguments,1);return this._plugins.push([t,e]),this._isRavenInstalled&&this._drainPlugins(),this},setUserContext:function(t){return this._globalContext.user=t,this},setExtraContext:function(t){return this._mergeContext("extra",t),this},setTagsContext:function(t){return this._mergeContext("tags",t),this},clearContext:function(){return this._globalContext={},this},getContext:function(){return JSON.parse(T(this._globalContext))},setEnvironment:function(t){return this._globalOptions.environment=t,this},setRelease:function(t){return this._globalOptions.release=t,this},setDataCallback:function(t){var e=this._globalOptions.dataCallback;return this._globalOptions.dataCallback=r(e,t),this},setBreadcrumbCallback:function(t){var e=this._globalOptions.breadcrumbCallback;return this._globalOptions.breadcrumbCallback=r(e,t),this},setShouldSendCallback:function(t){var e=this._globalOptions.shouldSendCallback;return this._globalOptions.shouldSendCallback=r(e,t),this},setTransport:function(t){return this._globalOptions.transport=t,this},lastException:function(){return this._lastCapturedException},lastEventId:function(){return this._lastEventId},isSetup:function(){return!!this._hasJSON&&(!!this._globalServer||(this.ravenNotConfiguredError||(this.ravenNotConfiguredError=!0,this._logDebug("error","Error: Raven has not been configured.")),!1))},afterLoad:function(){var t=M.RavenConfig;t&&this.config(t.dsn,t.config).install()},showReportDialog:function(t){if(R){t=t||{};var e=t.eventId||this.lastEventId();if(!e)throw new O("Missing eventId");var n=t.dsn||this._dsn;if(!n)throw new O("Missing DSN");var i=encodeURIComponent,r="";r+="?eventId="+i(e),r+="&dsn="+i(n);var s=t.user||this._globalContext.user;s&&(s.name&&(r+="&name="+i(s.name)),s.email&&(r+="&email="+i(s.email)));var a=this._getGlobalServer(this._parseDSN(n)),o=R.createElement("script");o.async=!0,o.src=a+"/api/embed/error-page/"+r,(R.head||R.body).appendChild(o)}},_ignoreNextOnError:function(){var t=this;this._ignoreOnError+=1,setTimeout(function(){t._ignoreOnError-=1})},_triggerEvent:function(t,e){var n,i;if(this._hasDocument){e=e||{},t="raven"+t.substr(0,1).toUpperCase()+t.substr(1),R.createEvent?(n=R.createEvent("HTMLEvents"),n.initEvent(t,!0,!0)):(n=R.createEventObject(),n.eventType=t);for(i in e)f(e,i)&&(n[i]=e[i]);if(R.createEvent)R.dispatchEvent(n);else try{R.fireEvent("on"+n.eventType.toLowerCase(),n)}catch(r){}}},_breadcrumbEventHandler:function(t){var e=this;return function(n){if(e._keypressTimeout=null,e._lastCapturedEvent!==n){e._lastCapturedEvent=n;var i;try{i=y(n.target)}catch(r){i="<unknown>"}e.captureBreadcrumb({category:"ui."+t,message:i})}}},_keypressEventHandler:function(){var t=this,e=1e3;return function(n){var i;try{i=n.target}catch(r){return}var s=i&&i.tagName;if(s&&("INPUT"===s||"TEXTAREA"===s||i.isContentEditable)){var a=t._keypressTimeout;a||t._breadcrumbEventHandler("input")(n),clearTimeout(a),t._keypressTimeout=setTimeout(function(){t._keypressTimeout=null},e)}}},_captureUrlChange:function(t,e){var n=g(this._location.href),i=g(e),r=g(t);this._lastHref=e,n.protocol===i.protocol&&n.host===i.host&&(e=i.relative),n.protocol===r.protocol&&n.host===r.host&&(t=r.relative),this.captureBreadcrumb({category:"navigation",data:{to:e,from:t}})},_instrumentTryCatch:function(){function t(t){return function(e,i){for(var r=new Array(arguments.length),s=0;s<r.length;++s)r[s]=arguments[s];var a=r[0];return o(a)&&(r[0]=n.wrap(a)),t.apply?t.apply(this,r):t(r[0],r[1])}}function e(t){var e=M[t]&&M[t].prototype;e&&e.hasOwnProperty&&e.hasOwnProperty("addEventListener")&&(x(e,"addEventListener",function(e){return function(i,s,a,o){try{s&&s.handleEvent&&(s.handleEvent=n.wrap(s.handleEvent))}catch(c){}var l,u,h;return r&&r.dom&&("EventTarget"===t||"Node"===t)&&(u=n._breadcrumbEventHandler("click"),h=n._keypressEventHandler(),l=function(t){if(t){var e;try{e=t.type}catch(n){return}return"click"===e?u(t):"keypress"===e?h(t):void 0}}),e.call(this,i,n.wrap(s,void 0,l),a,o)}},i),x(e,"removeEventListener",function(t){return function(e,n,i,r){try{n=n&&(n.__raven_wrapper__?n.__raven_wrapper__:n)}catch(s){}return t.call(this,e,n,i,r)}},i))}var n=this,i=n._wrappedBuiltIns,r=this._globalOptions.autoBreadcrumbs;x(M,"setTimeout",t,i),x(M,"setInterval",t,i),M.requestAnimationFrame&&x(M,"requestAnimationFrame",function(t){return function(e){return t(n.wrap(e))}},i);for(var s=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],a=0;a<s.length;a++)e(s[a])},_instrumentBreadcrumbs:function(){function t(t,n){t in n&&o(n[t])&&x(n,t,function(t){return e.wrap(t)})}var e=this,n=this._globalOptions.autoBreadcrumbs,i=e._wrappedBuiltIns;if(n.xhr&&"XMLHttpRequest"in M){var r=XMLHttpRequest.prototype;x(r,"open",function(t){return function(n,i){return c(i)&&i.indexOf(e._globalKey)===-1&&(this.__raven_xhr={method:n,url:i,status_code:null}),t.apply(this,arguments)}},i),x(r,"send",function(n){return function(i){function r(){if(s.__raven_xhr&&(1===s.readyState||4===s.readyState)){try{s.__raven_xhr.status_code=s.status;
}catch(t){}e.captureBreadcrumb({type:"http",category:"xhr",data:s.__raven_xhr})}}for(var s=this,a=["onload","onerror","onprogress"],c=0;c<a.length;c++)t(a[c],s);return"onreadystatechange"in s&&o(s.onreadystatechange)?x(s,"onreadystatechange",function(t){return e.wrap(t,void 0,r)}):s.onreadystatechange=r,n.apply(this,arguments)}},i)}n.xhr&&"fetch"in M&&x(M,"fetch",function(t){return function(n,i){for(var r=new Array(arguments.length),s=0;s<r.length;++s)r[s]=arguments[s];var a,o=r[0],c="GET";"string"==typeof o?a=o:(a=o.url,o.method&&(c=o.method)),r[1]&&r[1].method&&(c=r[1].method);var l={method:c,url:a,status_code:null};return e.captureBreadcrumb({type:"http",category:"fetch",data:l}),t.apply(this,r).then(function(t){return l.status_code=t.status,t})}},i),n.dom&&this._hasDocument&&(R.addEventListener?(R.addEventListener("click",e._breadcrumbEventHandler("click"),!1),R.addEventListener("keypress",e._keypressEventHandler(),!1)):(R.attachEvent("onclick",e._breadcrumbEventHandler("click")),R.attachEvent("onkeypress",e._keypressEventHandler())));var s=M.chrome,a=s&&s.app&&s.app.runtime,l=!a&&M.history&&history.pushState;if(n.location&&l){var h=M.onpopstate;M.onpopstate=function(){var t=e._location.href;if(e._captureUrlChange(e._lastHref,t),h)return h.apply(this,arguments)},x(history,"pushState",function(t){return function(){var n=arguments.length>2?arguments[2]:void 0;return n&&e._captureUrlChange(e._lastHref,n+""),t.apply(this,arguments)}},i)}if(n.console&&"console"in M&&console.log){var d=function(t,n){e.captureBreadcrumb({message:t,level:n.level,category:"console"})};u(["debug","info","warn","error","log"],function(t,e){P(console,e,d)})}},_restoreBuiltIns:function(){for(var t;this._wrappedBuiltIns.length;){t=this._wrappedBuiltIns.shift();var e=t[0],n=t[1],i=t[2];e[n]=i}},_drainPlugins:function(){var t=this;u(this._plugins,function(e,n){var i=n[0],r=n[1];i.apply(t,[t].concat(r))})},_parseDSN:function(t){var e=$.exec(t),n={},i=7;try{for(;i--;)n[D[i]]=e[i]||""}catch(r){throw new O("Invalid DSN: "+t)}if(n.pass&&!this._globalOptions.allowSecretKey)throw new O("Do not specify your secret key in the DSN. See: http://bit.ly/raven-secret-key");return n},_getGlobalServer:function(t){var e="//"+t.host+(t.port?":"+t.port:"");return t.protocol&&(e=t.protocol+":"+e),e},_handleOnErrorStackInfo:function(){this._ignoreOnError||this._handleStackInfo.apply(this,arguments)},_handleStackInfo:function(t,e){var n=this._prepareFrames(t,e);this._triggerEvent("handle",{stackInfo:t,options:e}),this._processException(t.name,t.message,t.url,t.lineno,n,e)},_prepareFrames:function(t,e){var n=this,i=[];if(t.stack&&t.stack.length&&(u(t.stack,function(t,e){var r=n._normalizeFrame(e);r&&i.push(r)}),e&&e.trimHeadFrames))for(var r=0;r<e.trimHeadFrames&&r<i.length;r++)i[r].in_app=!1;return i=i.slice(0,this._globalOptions.stackTraceLimit)},_normalizeFrame:function(t){if(t.url){var e={filename:t.url,lineno:t.line,colno:t.column,"function":t.func||"?"};return e.in_app=!(this._globalOptions.includePaths.test&&!this._globalOptions.includePaths.test(e.filename)||/(Raven|TraceKit)\./.test(e["function"])||/raven\.(min\.)?js$/.test(e.filename)),e}},_processException:function(t,e,n,i,r,s){var a;if((!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(e))&&(e+="",r&&r.length?(n=r[0].filename||n,r.reverse(),a={frames:r}):n&&(a={frames:[{filename:n,lineno:i,in_app:!0}]}),(!this._globalOptions.ignoreUrls.test||!this._globalOptions.ignoreUrls.test(n))&&(!this._globalOptions.whitelistUrls.test||this._globalOptions.whitelistUrls.test(n)))){var o=h({exception:{values:[{type:t,value:e,stacktrace:a}]},culprit:n},s);this._send(o)}},_trimPacket:function(t){var e=this._globalOptions.maxMessageLength;if(t.message&&(t.message=p(t.message,e)),t.exception){var n=t.exception.values[0];n.value=p(n.value,e)}var i=t.request;return i&&(i.url&&(i.url=p(i.url,this._globalOptions.maxUrlLength)),i.Referer&&(i.Referer=p(i.Referer,this._globalOptions.maxUrlLength))),t.breadcrumbs&&t.breadcrumbs.values&&this._trimBreadcrumbs(t.breadcrumbs),t},_trimBreadcrumbs:function(t){for(var e,n,i,r=["to","from","url"],s=0;s<t.values.length;++s)if(n=t.values[s],n.hasOwnProperty("data")&&A(n.data)&&!d(n.data)){i=h({},n.data);for(var a=0;a<r.length;++a)e=r[a],i.hasOwnProperty(e)&&(i[e]=p(i[e],this._globalOptions.maxUrlLength));t.values[s].data=i}},_getHttpData:function(){if(this._hasNavigator||this._hasDocument){var t={};return this._hasNavigator&&q.userAgent&&(t.headers={"User-Agent":navigator.userAgent}),this._hasDocument&&(R.location&&R.location.href&&(t.url=R.location.href),R.referrer&&(t.headers||(t.headers={}),t.headers.Referer=R.referrer)),t}},_resetBackoff:function(){this._backoffDuration=0,this._backoffStart=null},_shouldBackoff:function(){return this._backoffDuration&&i()-this._backoffStart<this._backoffDuration},_isRepeatData:function(t){var e=this._lastData;return!(!e||t.message!==e.message||t.culprit!==e.culprit)&&(t.stacktrace||e.stacktrace?k(t.stacktrace,e.stacktrace):!t.exception&&!e.exception||C(t.exception,e.exception))},_setBackoffState:function(t){if(!this._shouldBackoff()){var e=t.status;if(400===e||401===e||429===e){var n;try{n=t.getResponseHeader("Retry-After"),n=1e3*parseInt(n,10)}catch(r){}this._backoffDuration=n?n:2*this._backoffDuration||1e3,this._backoffStart=i()}}},_send:function(t){var e=this._globalOptions,n={project:this._globalProject,logger:e.logger,platform:"javascript"},r=this._getHttpData();if(r&&(n.request=r),t.trimHeadFrames&&delete t.trimHeadFrames,t=h(n,t),t.tags=h(h({},this._globalContext.tags),t.tags),t.extra=h(h({},this._globalContext.extra),t.extra),t.extra["session:duration"]=i()-this._startTime,this._breadcrumbs&&this._breadcrumbs.length>0&&(t.breadcrumbs={values:[].slice.call(this._breadcrumbs,0)}),l(t.tags)&&delete t.tags,this._globalContext.user&&(t.user=this._globalContext.user),e.environment&&(t.environment=e.environment),e.release&&(t.release=e.release),e.serverName&&(t.server_name=e.serverName),o(e.dataCallback)&&(t=e.dataCallback(t)||t),t&&!l(t)&&(!o(e.shouldSendCallback)||e.shouldSendCallback(t)))return this._shouldBackoff()?void this._logDebug("warn","Raven dropped error due to backoff: ",t):void("number"==typeof e.sampleRate?Math.random()<e.sampleRate&&this._sendProcessedPayload(t):this._sendProcessedPayload(t))},_getUuid:function(){return _()},_sendProcessedPayload:function(t,e){var n=this,i=this._globalOptions;if(this.isSetup()){if(this._lastEventId=t.event_id||(t.event_id=this._getUuid()),t=this._trimPacket(t),!this._globalOptions.allowDuplicates&&this._isRepeatData(t))return void this._logDebug("warn","Raven dropped repeat event: ",t);this._lastData=t,this._logDebug("debug","Raven about to send:",t);var r={sentry_version:"7",sentry_client:"raven-js/"+this.VERSION,sentry_key:this._globalKey};this._globalSecret&&(r.sentry_secret=this._globalSecret);var s=t.exception&&t.exception.values[0];this.captureBreadcrumb({category:"sentry",message:s?(s.type?s.type+": ":"")+s.value:t.message,event_id:t.event_id,level:t.level||"error"});var a=this._globalEndpoint;(i.transport||this._makeRequest).call(this,{url:a,auth:r,data:t,options:i,onSuccess:function(){n._resetBackoff(),n._triggerEvent("success",{data:t,src:a}),e&&e()},onError:function(i){n._logDebug("error","Raven transport failed to send: ",i),i.request&&n._setBackoffState(i.request),n._triggerEvent("failure",{data:t,src:a}),i=i||new Error("Raven send failed (no additional details provided)"),e&&e(i)}})}},_makeRequest:function(t){var e=new XMLHttpRequest,n="withCredentials"in e||"undefined"!=typeof XDomainRequest;if(n){var i=t.url;"withCredentials"in e?e.onreadystatechange=function(){if(4===e.readyState)if(200===e.status)t.onSuccess&&t.onSuccess();else if(t.onError){var n=new Error("Sentry error code: "+e.status);n.request=e,t.onError(n)}}:(e=new XDomainRequest,i=i.replace(/^https?:/,""),t.onSuccess&&(e.onload=t.onSuccess),t.onError&&(e.onerror=function(){var n=new Error("Sentry error code: XDomainRequest");n.request=e,t.onError(n)})),e.open("POST",i+"?"+v(t.auth)),e.send(T(t.data))}},_logDebug:function(t){this._originalConsoleMethods[t]&&this.debug&&Function.prototype.apply.call(this._originalConsoleMethods[t],this._originalConsole,[].slice.call(arguments,1))},_mergeContext:function(t,e){a(e)?delete this._globalContext[t]:this._globalContext[t]=h(this._globalContext[t]||{},e)}};var U=Object.prototype;"undefined"!=typeof __DEV__&&__DEV__&&(s.utils={isUndefined:a,isFunction:o,isString:c,isObject:A,isEmptyObject:l,isError:S,each:u,objectMerge:h,truncate:p,hasKey:f,joinRegExp:m,urlencode:v,uuid4:_,htmlTreeAsString:y,htmlElementAsString:b,parseUrl:g,fill:x}),s.prototype.setUser=s.prototype.setUserContext,s.prototype.setReleaseContext=s.prototype.setRelease,t.exports=s}).call(e,n(0))},function(t,e,n){"use strict";(function(e){function i(){return"undefined"==typeof document||"undefined"==typeof document.location?"":document.location.href}var r=n(2),s={collectWindowErrors:!0,debug:!1},a="undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{},o=[].slice,c="?",l=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;s.report=function(){function t(t){d(),_.push(t)}function e(t){for(var e=_.length-1;e>=0;--e)_[e]===t&&_.splice(e,1)}function n(){p(),_=[]}function u(t,e){var n=null;if(!e||s.collectWindowErrors){for(var i in _)if(_.hasOwnProperty(i))try{_[i].apply(null,[t].concat(o.call(arguments,2)))}catch(r){n=r}if(n)throw n}}function h(t,e,n,a,o){var h=null;if(w)s.computeStackTrace.augmentStackTraceWithInitialElement(w,e,n,t),f();else if(o&&r.isError(o))h=s.computeStackTrace(o),u(h,!0);else{var d,p={url:e,line:n,column:a},m=void 0,g=t;if("[object String]"==={}.toString.call(t)){var d=t.match(l);d&&(m=d[1],g=d[2])}p.func=c,h={name:m,message:g,url:i(),stack:[p]},u(h,!0)}return!!v&&v.apply(this,arguments)}function d(){g||(v=a.onerror,a.onerror=h,g=!0)}function p(){g&&(a.onerror=v,g=!1,v=void 0)}function f(){var t=w,e=y;y=null,w=null,b=null,u.apply(null,[t,!1].concat(e))}function m(t,e){var n=o.call(arguments,1);if(w){if(b===t)return;f()}var i=s.computeStackTrace(t);if(w=i,b=t,y=n,setTimeout(function(){b===t&&f()},i.incomplete?2e3:0),e!==!1)throw t}var v,g,_=[],y=null,b=null,w=null;return m.subscribe=t,m.unsubscribe=e,m.uninstall=n,m}(),s.computeStackTrace=function(){function t(t){if("undefined"!=typeof t.stack&&t.stack){for(var e,n,r,s=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,a=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,o=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,l=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,u=/\((\S*)(?::(\d+))(?::(\d+))\)/,h=t.stack.split("\n"),d=[],p=(/^(.*) is undefined$/.exec(t.message),0),f=h.length;p<f;++p){if(n=s.exec(h[p])){var m=n[2]&&0===n[2].indexOf("native"),v=n[2]&&0===n[2].indexOf("eval");v&&(e=u.exec(n[2]))&&(n[2]=e[1],n[3]=e[2],n[4]=e[3]),r={url:m?null:n[2],func:n[1]||c,args:m?[n[2]]:[],line:n[3]?+n[3]:null,column:n[4]?+n[4]:null}}else if(n=o.exec(h[p]))r={url:n[2],func:n[1]||c,args:[],line:+n[3],column:n[4]?+n[4]:null};else{if(!(n=a.exec(h[p])))continue;var v=n[3]&&n[3].indexOf(" > eval")>-1;v&&(e=l.exec(n[3]))?(n[3]=e[1],n[4]=e[2],n[5]=null):0!==p||n[5]||"undefined"==typeof t.columnNumber||(d[0].column=t.columnNumber+1),r={url:n[3],func:n[1]||c,args:n[2]?n[2].split(","):[],line:n[4]?+n[4]:null,column:n[5]?+n[5]:null}}!r.func&&r.line&&(r.func=c),d.push(r)}return d.length?{name:t.name,message:t.message,url:i(),stack:d}:null}}function e(t,e,n,i){var r={url:e,line:n};if(r.url&&r.line){if(t.incomplete=!1,r.func||(r.func=c),t.stack.length>0&&t.stack[0].url===r.url){if(t.stack[0].line===r.line)return!1;if(!t.stack[0].line&&t.stack[0].func===r.func)return t.stack[0].line=r.line,!1}return t.stack.unshift(r),t.partial=!0,!0}return t.incomplete=!0,!1}function n(t,a){for(var o,l,u=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,h=[],d={},p=!1,f=n.caller;f&&!p;f=f.caller)if(f!==r&&f!==s.report){if(l={url:null,func:c,line:null,column:null},f.name?l.func=f.name:(o=u.exec(f.toString()))&&(l.func=o[1]),"undefined"==typeof l.func)try{l.func=o.input.substring(0,o.input.indexOf("{"))}catch(m){}d[""+f]?p=!0:d[""+f]=!0,h.push(l)}a&&h.splice(0,a);var v={name:t.name,message:t.message,url:i(),stack:h};return e(v,t.sourceURL||t.fileName,t.line||t.lineNumber,t.message||t.description),v}function r(e,r){var a=null;r=null==r?0:+r;try{if(a=t(e))return a}catch(o){if(s.debug)throw o}try{if(a=n(e,r+1))return a}catch(o){if(s.debug)throw o}return{name:e.name,message:e.message,url:i()}}return r.augmentStackTraceWithInitialElement=e,r.computeStackTraceFromStackProp=t,r}(),t.exports=s}).call(e,n(0))},function(t,e){"use strict";function n(t,e){for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}function i(t,e,n,i){return JSON.stringify(t,r(e,i),n)}function r(t,e){var i=[],r=[];return null==e&&(e=function(t,e){return i[0]===e?"[Circular ~]":"[Circular ~."+r.slice(0,n(i,e)).join(".")+"]"}),function(s,a){if(i.length>0){var o=n(i,this);~o?i.splice(o+1):i.push(this),~o?r.splice(o,1/0,s):r.push(s),~n(i,a)&&(a=e.call(this,s,a))}else i.push(a);return null==t?a:t.call(this,s,a)}}e=t.exports=i,e.getSerialize=r},function(t,e,n){var i,r;i=n(13);var s=n(26);r=i=i||{},"object"!=typeof i["default"]&&"function"!=typeof i["default"]||(r=i=i["default"]),"function"==typeof r&&(r=r.options),r.render=s.render,r.staticRenderFns=s.staticRenderFns,t.exports=i},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"modal",staticClass:"modal fade",attrs:{tabindex:"-1",role:"dialog"},on:{click:function(e){return e.target!==e.currentTarget?null:void t.close()},keyup:function(e){return"button"in e||!t._k(e.keyCode,"esc",27)?void t.close():null}}},[n("div",{staticClass:"modal-dialog modal-lg sz-game-tips-dialog",attrs:{role:"document"}},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header"},[n("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){t.close()}}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])]),t._v(" "),n("h4",{staticClass:"modal-title text-center"},[t._v(t._s(t.activity.title))])]),t._v(" "),n("div",{staticClass:"modal-body"},[n("h4",{staticClass:"text-center"},[t._v(t._s(t.$t("tips-text")))]),t._v(" "),n("div",{ref:"tips",staticClass:"tips"},[n("transition",{attrs:{name:"tip-side",mode:"out-in","enter-active-class":t.enterActiveClass,"leave-active-class":t.leaveActiveClass}},["look_closely"===t.currentItem?n("div",{key:"look_closely",staticClass:"tip"},[n("div",{staticClass:"tip-image"},[n("img",{staticClass:"img-responsive center-block",attrs:{alt:"image",src:t.getItemImageUrl("look_closely")}})]),t._v(" "),n("h4",{staticClass:"text-center"},[t._v(t._s(t.$t("items.look_closely.title")))]),t._v(" "),n("div",{staticClass:"text-center"},[t._v(t._s(t.$t("items.look_closely.description")))])]):t._e(),t._v(" "),"look_out"===t.currentItem?n("div",{key:"look_out",staticClass:"tip"},[n("div",{staticClass:"tip-image"},[n("img",{staticClass:"img-responsive center-block",attrs:{alt:"image",src:t.getItemImageUrl("look_out")}})]),t._v(" "),n("h4",{staticClass:"text-center"},[t._v(t._s(t.$t("items.look_out.title")))]),t._v(" "),n("div",{staticClass:"text-center"},[t._v(t._s(t.$t("items.look_out.description")))])]):t._e(),t._v(" "),"do_not_disturb"===t.currentItem?n("div",{key:"do_not_disturb",staticClass:"tip"},[n("div",{staticClass:"tip-image"},[n("img",{staticClass:"img-responsive center-block",attrs:{alt:"image",src:t.getItemImageUrl("do_not_disturb")}})]),t._v(" "),n("h4",{staticClass:"text-center"},[t._v(t._s(t.$t("items.do_not_disturb.title")))]),t._v(" "),n("div",{staticClass:"text-center"},[t._v(t._s(t.$t("items.do_not_disturb.description")))])]):t._e(),t._v(" "),"help_others"===t.currentItem?n("div",{key:"help_others",staticClass:"tip"},[n("div",{staticClass:"tip-image"},[n("img",{staticClass:"img-responsive center-block",attrs:{alt:"image",src:t.getItemImageUrl("help_others")}})]),t._v(" "),n("h4",{staticClass:"text-center"},[t._v(t._s(t.$t("items.help_others.title")))]),t._v(" "),n("div",{staticClass:"text-center"},[t._v(t._s(t.$t("items.help_others.description")))])]):t._e()])],1),t._v(" "),n("ul",{staticClass:"text-center slides"},t._l(t.items,function(e){return n("li",[n("span",{"class":{badge:!0,current:e===t.currentItem}},[t._v(" ")])])}))]),t._v(" "),n("div",{staticClass:"modal-footer"},[t.isFirstItem()?t._e():n("button",{staticClass:"btn btn-default btn-lg pull-left",attrs:{type:"button",disabled:!t.currentItem},on:{click:function(e){t.previousItem()}}},[t._v(t._s(t.$t("back")))]),t._v(" "),t.isLastItem()?t._e():n("button",{staticClass:"btn btn-success btn-lg pull-right",attrs:{type:"button",disabled:!t.currentItem},on:{click:function(e){t.nextItem()}}},[t._v(t._s(t.$t("next")))]),t._v(" "),t.isLastItem()?n("button",{staticClass:"btn btn-success btn-lg pull-right",attrs:{type:"button",disabled:!t.currentItem},on:{click:function(e){t.close()}}},[t._v(t._s(t.$t("got-it")))]):t._e()])])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{height:"100%",width:"100%"}},[t.question?n("game-question-modal",{ref:"questionModal",attrs:{question:t.question,"game-id":t.game.id,"base-url":t.baseUrl}}):t._e(),t._v(" "),n("div",{attrs:{id:"map"}})],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"modal",staticClass:"modal fade",attrs:{tabindex:"-1",role:"dialog"},on:{click:function(e){return e.target!==e.currentTarget?null:void t.close()},keyup:function(e){return"button"in e||!t._k(e.keyCode,"esc",27)?void t.close():null}}},[n("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header"},[n("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close",diabled:t.inAjaxCall},on:{click:function(e){t.close()}}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])]),t._v(" "),n("h4",{staticClass:"modal-title"},[t._v(t._s(t.title()))])]),t._v(" "),n("div",{staticClass:"modal-body"},[t.hasImage()?n("div",[n("img",{staticClass:"img-responsive",attrs:{src:"",alt:"image",src:t.image()}})]):t._e(),t._v(" "),n("p",{staticClass:"sz-display-new-lines"},[t._v(t._s(t.description()))]),t._v(" "),t.isOneCorrectAnswer()?n("div",[n("ul",{staticClass:"media-list sz-one-correct-answer"},t._l(t.options(),function(e,i){return n("li",{staticClass:"media",on:{click:function(e){t.triggerOptionClick(i)}}},[e.image?n("div",{staticClass:"media-left"},[n("img",{staticClass:"media-object",attrs:{src:e.image,alt:"option-image"}})]):t._e(),t._v(" "),n("div",{staticClass:"media-body media-middle"},[n("h4",{staticClass:"media-heading"},[t._v(t._s(e.option))])]),t._v(" "),n("div",{staticClass:"media-right media-middle"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptions,expression:"selectedOptions"}],ref:"option",refInFor:!0,staticClass:"form-control",attrs:{type:"radio",name:"option"},domProps:{value:e.id,checked:t._q(t.selectedOptions,e.id)},on:{__c:function(n){t.selectedOptions=e.id}}}),t._v(" "),t.isSelectedOption(e.id)?t._e():n("i",{staticClass:"mdi mdi-radiobox-blank"}),t._v(" "),t.isSelectedOption(e.id)?n("i",{staticClass:"mdi mdi-radiobox-marked","class":{correct:t.isCorrectlyAnswered(e.id),incorrect:t.isIncorrectlyAnswered(e.id)}}):t._e()])])}))]):t._e(),t._v(" "),t.isMultipleCorrectAnswers()?n("div",[n("ul",{staticClass:"media-list sz-multiple-correct-answers"},t._l(t.options(),function(e,i){return n("li",{staticClass:"media",on:{click:function(e){t.triggerOptionClick(i)}}},[e.image?n("div",{staticClass:"media-left"},[n("img",{staticClass:"media-object",attrs:{src:e.image,alt:"option-image"}})]):t._e(),t._v(" "),n("div",{staticClass:"media-body media-middle"},[n("h4",{staticClass:"media-heading"},[t._v(t._s(e.option))])]),t._v(" "),n("div",{staticClass:"media-right media-middle"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptions,expression:"selectedOptions"}],ref:"option",refInFor:!0,staticClass:"form-control",attrs:{type:"checkbox",name:"options[]"},domProps:{value:e.id,checked:Array.isArray(t.selectedOptions)?t._i(t.selectedOptions,e.id)>-1:t.selectedOptions},on:{__c:function(n){var i=t.selectedOptions,r=n.target,s=!!r.checked;if(Array.isArray(i)){var a=e.id,o=t._i(i,a);r.checked?o<0&&(t.selectedOptions=i.concat([a])):o>-1&&(t.selectedOptions=i.slice(0,o).concat(i.slice(o+1)))}else t.selectedOptions=s}}}),t._v(" "),t.isSelectedOption(e.id)?t._e():n("i",{staticClass:"mdi mdi-checkbox-blank-outline"}),t._v(" "),t.isSelectedOption(e.id)?n("i",{staticClass:"mdi mdi-checkbox-marked-outline","class":{correct:t.isCorrectlyAnswered(e.id),incorrect:t.isIncorrectlyAnswered(e.id)}}):t._e()])])}))]):t._e(),t._v(" "),t.isFreeformAnswer()?n("div",[n("div",{staticClass:"form-group"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.textualAnswer,expression:"textualAnswer"}],staticClass:"form-control",attrs:{placeholder:t.$t("textual-answer-placeholder")},domProps:{value:t.textualAnswer},on:{input:function(e){e.target.composing||(t.textualAnswer=e.target.value)}}})])]):t._e(),t._v(" "),t.isMatchPairs()?n("div",[n("div",{staticClass:"row sz-match-pairs"},[n("div",{staticClass:"col-xs-6"},t._l(t.pairs(),function(e){return n("div",{staticClass:"row"},[n("div",{staticClass:"col-xs-12"},[n("div",{ref:"matchable",refInFor:!0,staticClass:"sz-matchable","class":{chosen:t.isOptionChosen(e),matched:t.isMatchedPair(e)},style:t.matchableStyles,on:{click:function(n){t.choosePair(e)}}},[e.image?n("img",{staticClass:"media-object",attrs:{src:e.image,alt:"pair-image"}}):t._e(),t._v(" "),n("div",[t._v(t._s(e.option))])])])])})),t._v(" "),n("div",{staticClass:"col-xs-6"},t._l(t.pairs(!0),function(e){return n("div",{staticClass:"row"},[n("div",{staticClass:"col-xs-12"},[n("div",{ref:"matchable",refInFor:!0,staticClass:"sz-matchable","class":{chosen:t.isOptionMatchChosen(e),matched:t.isMatchedPair(e)},style:t.matchableStyles,on:{click:function(n){t.choosePairMatch(e)}}},[e.image_match?n("img",{staticClass:"media-object",attrs:{src:e.image_match,alt:"pair-image"}}):t._e(),t._v(" "),n("div",[t._v(t._s(e.option_match))])])])])}))])]):t._e(),t._v(" "),t.isEmbeddedContent()?n("div",[n("div",{staticClass:"embed-responsive embed-responsive-16by9",domProps:{innerHTML:t._s(t.embeddedContent())}}),t._v(" "),n("div",{staticClass:"form-group"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.textualAnswer,expression:"textualAnswer"}],staticClass:"form-control",attrs:{placeholder:t.$t("textual-answer-placeholder")},domProps:{value:t.textualAnswer},on:{input:function(e){e.target.composing||(t.textualAnswer=e.target.value)}}})])]):t._e(),t._v(" "),t.isPhoto()?n("div",{staticClass:"sz-photo"},[n("transition",{attrs:{name:"fade-in-down-out-up","enter-active-class":"animated fadeInDown","leave-active-class":"animated fadeOutUp"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.incorrectImageFormat,expression:"incorrectImageFormat"}],staticClass:"alert alert-danger text-center",attrs:{role:"alert"}},[t._v("\n                            "+t._s(t.$t("image-format-hint"))+"\n                        ")])]),t._v(" "),n("div",{staticClass:"row text-center"},[n("a",{staticClass:"btn sz-take-image","class":{"sz-image-taken":t.hasImageSelected},attrs:{href:"#",tabindex:"-1"},on:{click:function(e){e.preventDefault(),t.triggerImageClick()}}},[n("i",{staticClass:"mdi mdi-camera",attrs:{"aria-hidden":"true"}})])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.hasImageSelected,expression:"hasImageSelected"}],staticClass:"row"},[n("div",{staticClass:"col-xs-10 col-xs-offset-1"},[n("img",{staticClass:"img-responsive center-block",attrs:{src:t.imageSrc,alt:"uploadable-image"}})])]),t._v(" "),n("input",{ref:"image",attrs:{type:"file",accept:"image/*",capture:"camera",name:"image"},on:{change:function(e){t.imageSelected()}}})],1):t._e()]),t._v(" "),n("div",{staticClass:"modal-footer"},[t.hasReadMore()?n("a",{staticClass:"btn btn-default",attrs:{href:"",href:t.readMore(),target:"_blank"}},[n("i",{staticClass:"mdi mdi-open-in-new",attrs:{"aria-hidden":"true"}}),t._v("\n                    "+t._s(t.$t("read-more-about"))+"\n                ")]):t._e(),t._v(" "),n("button",{staticClass:"btn btn-default",attrs:{type:"button",disabled:t.inAjaxCall,title:t.$t("close")},on:{click:function(e){t.close()}}},[n("i",{staticClass:"mdi mdi-close"})]),t._v(" "),n("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:!t.canSubmit()||t.inAjaxCall,title:t.$t("submit")},on:{click:function(e){t.submit()}}},[n("i",{staticClass:"mdi mdi-send"})])])])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"modal",staticClass:"modal fade",attrs:{tabindex:"-1",role:"dialog"},on:{click:function(e){return e.target!==e.currentTarget?null:void t.close()},keyup:function(e){return"button"in e||!t._k(e.keyCode,"esc",27)?void t.close():null}}},[n("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header"},[n("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){t.close()}}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])]),t._v(" "),n("h4",{staticClass:"modal-title text-center"},[t._v(t._s(t.activity.title))])]),t._v(" "),n("div",{staticClass:"modal-body"},[t._m(0),t._v(" "),n("div",{staticClass:"collapse",attrs:{id:"iconCodes"}},[n("div",{staticClass:"well well-sm"},[n("p",{staticClass:"help-block"},[t._v(t._s(t.$t("icons.help")))]),t._v(" "),t._l(t.icons,function(e){return n("div",{staticClass:"media"},[n("div",{staticClass:"media-left media-middle"},[n("img",{staticClass:"media-object",staticStyle:{width:"30px",height:"30px"},attrs:{alt:"icon",src:t.getIconUrl(e)}})]),t._v(" "),n("div",{staticClass:"media-body"},[n("p",[t._v(t._s(t.getIconText(e)))])])])})],2)]),t._v(" "),t.activity.description?n("p",{staticClass:"sz-display-new-lines text-center"},[t._v("\n                    "+t._s(t.activity.description)+"\n                ")]):t._e(),t._v(" "),n("h4",[t._v(t._s(t.$t("number-of-questions")))]),t._v(" "),n("p",[t._v(t._s(t.activity.questions.length))]),t._v(" "),n("h4",[t._v(t._s(t.$t("difficulty-level")))]),t._v(" "),n("p",[t._v("\n                    "+t._s(t.activity.difficulty_level)+"\n                ")]),t._v(" "),n("h4",[t._v(t._s(t.$t("playing-time")))]),t._v(" "),n("p",[t._v("\n                    "+t._s(t.activity.playing_time)+" "+t._s(t.$t("minutes"))+"\n                ")]),t._v(" "),n("p",[n("img",{staticClass:"img-responsive center-block",attrs:{src:t.activity.featured_image,alt:"featured-image"}})])]),t._v(" "),n("div",{staticClass:"modal-footer"},[n("button",{staticClass:"btn btn-lg center-block sz-go-btn",attrs:{type:"button"},on:{click:function(e){t.close()}}},[t._v(t._s(t.$t("go")))])])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"btn btn-default btn-sm pull-right",attrs:{role:"button","data-toggle":"collapse","data-target":"#iconCodes","aria-expanded":"false","aria-controls":"iconCodes"}},[n("i",{staticClass:"mdi mdi-information-outline"})])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"modal",staticClass:"modal fade",attrs:{tabindex:"-1",role:"dialog","data-backdrop":"static","data-keyboard":"false"}},[n("div",{staticClass:"modal-dialog modal-lg sz-game-results",attrs:{role:"document"}},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header"},[n("h4",{staticClass:"modal-title"},[t._v(t._s(t.activity.title))])]),t._v(" "),n("div",{staticClass:"modal-body"},[n("h2",{staticClass:"text-center"},[t._v(t._s(t.$t("results-heading")))]),t._v(" "),t._l(t.activity.questions,function(e,i){return n("div",[n("h3",[t._v(t._s(i+1)+". "+t._s(e.title))]),t._v(" "),n("p",{staticClass:"sz-display-new-lines"},[t._v(t._s(e.description))]),t._v(" "),t.isOneCorrectAnswer(e)||t.isMultipleCorrectAnswers(e)?n("div",t._l(e.options,function(i){return n("ul",{staticClass:"media-list sz-options-list","class":{correct:t.isCorrect(e)}},[n("li",{staticClass:"media sz-option"},[i.image?n("div",{staticClass:"media-left"},[n("img",{staticClass:"media-object",attrs:{src:i.image,alt:"option-image"}})]):t._e(),t._v(" "),n("div",{staticClass:"media-body"},[n("h4",{staticClass:"media-heading"},[t._v(t._s(i.option))])]),t._v(" "),n("div",{staticClass:"media-right media-middle"},[t.isOneCorrectAnswer(e)&&t.choseOption(e,i)?n("i",{staticClass:"mdi mdi-radiobox-marked",attrs:{"aria-hidden":"true"}}):t._e(),t._v(" "),t.isOneCorrectAnswer(e)&&!t.choseOption(e,i)?n("i",{staticClass:"mdi mdi-radiobox-blank",attrs:{"aria-hidden":"true"}}):t._e(),t._v(" "),t.isMultipleCorrectAnswers(e)&&t.choseOption(e,i)?n("i",{staticClass:"mdi mdi-checkbox-marked-outline",attrs:{"aria-hidden":"true"}}):t._e(),t._v(" "),t.isMultipleCorrectAnswers(e)&&!t.choseOption(e,i)?n("i",{staticClass:"mdi mdi-checkbox-blank-outline",attrs:{"aria-hidden":"true"}}):t._e()])])])})):t._e(),t._v(" "),t.isFreeformAnswer(e)||t.isEmbeddedContent(e)?n("div",[t.hasText(e)?n("div",{staticClass:"well well-sm"},[t._v("\n                            "+t._s(t.getText(e))+"\n                        ")]):t._e()]):t._e(),t._v(" "),t.isPhoto(e)?n("div",{staticClass:"sz-photo"},[t.hasImage(e)?n("div",{staticClass:"well well-sm"},[n("img",{staticClass:"img-responsive center-block",attrs:{alt:"uploaded-image",src:t.getImage(e)}})]):t._e()]):t._e(),t._v(" "),n("div",[e.read_more?n("a",{staticClass:"btn btn-default btn-sm",attrs:{href:"",href:e.read_more,target:"_blank"}},[n("i",{staticClass:"mdi mdi-open-in-new",attrs:{"aria-hidden":"true"}}),t._v("\n                            "+t._s(t.$t("read-more-about"))+"\n                        ")]):t._e()])])})],2),t._v(" "),n("div",{staticClass:"modal-footer"},[n("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(e){t.exit()}}},[n("i",{staticClass:"mdi mdi-exit-to-app"})])])])])])},staticRenderFns:[]}},function(t,e,n){"use strict";var i=n(5),r=n.n(i),s=n(4),a=n.n(s),o=n(3),c=(n.n(o),n(6));Vue.use(c),Vue.config.lang=window.SmartZoos.config.locale,Vue.locale(window.SmartZoos.config.locale,_.cloneDeep(window.SmartZoos.data.translations)),SmartZoos.config.sentry&&SmartZoos.config.sentry.sdn&&r.a.config(SmartZoos.config.sentry.sdn).addPlugin(a.a,Vue).install(),Vue.component("game-map",n(8)),Vue.component("game-tutorial-modal",n(10)),Vue.component("game-information-modal",n(7)),Vue.component("game-results-modal",n(9));new Vue({el:"#sz-play-app",created:function(){var t=this;if(t.baseUrl=window.SmartZoos.config.base_url,t.game=window.SmartZoos.data.game,window.addEventListener("beforeunload",t.leaving),t.$on("dialog:tutorial:close",function(){t.setHasSeenTotorial()}),!t.isGameComplete()){window.initMap=function(){t.mapInitialised=!0},t.getGeoLocation(function(e){t.latitude=e.coords.latitude,t.longitude=e.coords.longitude},!1,function(e){t.geoLocationErrorMessage=e.message});var e=document.createElement("script");e.type="text/javascript",e.src="//maps.googleapis.com/maps/api/js?key="+window.SmartZoos.config.map.key+"&callback=initMap&libraries=geometry",document.body.appendChild(e)}},mounted:function(){this.isGameComplete()?this.$refs.resultsModal.open():this.hasSeenTutorial()?this.$refs.informationModal.open():this.$refs.tutorialModal.open()},data:function(){return{baseUrl:"",mapInitialised:!1,
latitude:void 0,longitude:void 0,geoLocationErrorMessage:null,checkUnload:!0,game:null}},methods:{isLoading:function(){return!(this.mapInitialised&&this.latitude&&this.longitude)},isGameComplete:function(){return this.game&&this.game.complete},getGeoLocation:function(t,e,n){if("function"!=typeof n&&(n=function(t){window.console&&window.console.error&&"function"==typeof window.console.error&&window.console.error("Geolocation error",t)}),!window.navigator.geolocation)throw"Geolocation is unavailable!";var i={enableHighAccuracy:!0};e===!0?window.navigator.geolocation.watchPosition(t,n,i):window.navigator.geolocation.getCurrentPosition(t,n,i)},hasGeoLocationError:function(){return!!this.geoLocationErrorMessage},leaving:function(t){if(!this.checkUnload)return!1;var e=this.$t("exit-confirmation");return t.returnValue=e,e},exit:function(){var t=confirm(this.$t("exit-confirmation"));t&&(this.checkUnload=!1,window.location=this.baseUrl)},hasSeenTutorial:function(){return!!window.sessionStorage&&"true"===window.sessionStorage.getItem("seen:game:tutorial")},setHasSeenTotorial:function(){if(window.sessionStorage)try{window.sessionStorage.setItem("seen:game:tutorial","true")}catch(t){}}}})}]);